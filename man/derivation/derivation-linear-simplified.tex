\documentclass{article}

\setlength{\parindent}{0pt}
\setlength{\parskip}{8pt}

%\usepackage{../notation/notation}
\usepackage{notation}
\usepackage{geometry,amsmath,amssymb,bm,mathtools,graphicx,pdfpages,tikz,float,blkarray,longtable,titlesec,cases,bm,titlesec,breqn}

\setcounter{secnumdepth}{4}

\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\geometry{
	a4paper,
	total={170mm,257mm},
	left=15mm,
	top=20mm,
	right=15mm,
	bottom=25mm
}

\title{Refunded Emissions Payment Scheme: Long-run Parameter Calibration\\Linear GEP Formulation}
%\widehat{}\textasciicaron
\allowdisplaybreaks[1]

% Sets
\newcommand{\sGenerators}{G}
\newcommand{\sGeneratorsExisting}{G^{\mathrm{E}}}
\newcommand{\sGeneratorsExistingThermal}{G^{\mathrm{E,T}}}
\newcommand{\sGeneratorsExistingWind}{G^{\mathrm{E,W}}}
\newcommand{\sGeneratorsExistingSolar}{G^{\mathrm{E,S}}}
\newcommand{\sGeneratorsCandidate}{G^{\mathrm{C}}}
\newcommand{\sGeneratorsCandidateThermal}{G^{\mathrm{C,T}}}
\newcommand{\sGeneratorsCandidateWind}{G^{\mathrm{C,W}}}
\newcommand{\sGeneratorsCandidateSolar}{G^{\mathrm{C,S}}}
\newcommand{\sGeneratorsThermal}{G^{\mathrm{T}}}
\newcommand{\sGeneratorsHydro}{G^{\mathrm{H}}}
\newcommand{\sStorage}{G^{\mathrm{Q}}}
\newcommand{\sStorageExisting}{G^{\mathrm{E,Q}}}
\newcommand{\sStorageCandidate}{G^{\mathrm{C,Q}}}
\newcommand{\sYears}{Y}
\newcommand{\sScenarios}{S}
\newcommand{\sIntervals}{T}
\newcommand{\sZones}{Z}
\newcommand{\sRegions}{R}
%\newcommand{\sInvestmentSizeOptions}{N^{\mathrm{C}}}
%\newcommand{\sInvestmentSizeOptionsGenerator}[1][\iGenerator]{\sInvestmentSizeOptions_{#1}}
%\newcommand{\sGeneratorsExistingThermalQuickStart}{G^{\mathrm{E,T}}_\mathrm{Q}}
%\newcommand{\sGeneratorsCandidateThermalQuickStart}{G^{\mathrm{C,T}}_\mathrm{Q}}
%\newcommand{\sGeneratorsThermalQuickStart}{G^{\mathrm{T}}_\mathrm{Q}}
%\newcommand{\sGeneratorsExistingThermalSlowStart}{G^{\mathrm{E,T}}_\mathrm{S}}
\newcommand{\sLinks}{L}
\newcommand{\sScenariosYear}{\sScenarios_{\iYear}}

% Indices
\newcommand{\iGenerator}{g}
\newcommand{\iYear}{y}
\newcommand{\iYearTerminal}{\overline{\iYear}}
\newcommand{\iYearAlias}{j}
\newcommand{\iScenario}{s}
\newcommand{\iScenarioAlias}{m}
\newcommand{\iInterval}{t}
\newcommand{\iIntervalAlias}{k}
\newcommand{\iIntervalTerminal}{\overline{\iInterval}}
\newcommand{\iIntervalStart}{\underline{\iInterval}}


\newcommand{\iZone}{z}
\newcommand{\iRegion}{r}
%\newcommand{\iInvestmentSizeOption}{n}
\newcommand{\iLink}{l}

% Parameters
\newcommand{\cOperatingCost}[1][\iYear,\iScenario]{\mathrm{OP}_{#1}}
\newcommand{\cOperatingCostThermal}[1][\iYear,\iScenario]{\mathrm{OP}^{\mathrm{T}}_{#1}}
\newcommand{\cOperatingCostHydro}[1][\iYear,\iScenario]{\mathrm{OP}^{\mathrm{H}}_{#1}}
\newcommand{\cOperatingCostWind}[1][\iYear,\iScenario]{\mathrm{OP}^{\mathrm{W}}_{#1}}
\newcommand{\cOperatingCostSolar}[1][\iYear,\iScenario]{\mathrm{OP}^{\mathrm{S}}_{#1}}
\newcommand{\cOperatingCostStorage}[1][\iYear,\iScenario]{\mathrm{OP}^{\mathrm{Q}}_{#1}}
\newcommand{\cFixedOperationsMaintenanceCost}[1][\iYear]{\mathrm{FOM}_{#1}}
\newcommand{\cFixedOperationsMaintenanceCostGenerator}[1][\iGenerator]{C^{\mathrm{FOM}}_{#1}}
\newcommand{\cScenarioDuration}[1][\iYear,\iScenario]{\rho_{#1}}
\newcommand{\cMarginalCost}[1][\iGenerator,\iYear]{C^{\mathrm{MC}}_{#1}}
%\newcommand{\cStartupCost}[1][\iGenerator]{C^{\mathrm{SU}}_{#1}}
%\newcommand{\cShutdownCost}[1][\iGenerator]{C^{\mathrm{SD}}_{#1}}
\newcommand{\cEmissionsIntensity}[1][\iGenerator]{E_{#1}}
\newcommand{\cPowerOutputMax}[1][\iGenerator,\iYear]{\overline{P}_{#1}}
\newcommand{\cAmortisationRate}[1][\iGenerator]{\gamma_{#1}}
\newcommand{\cCandidateInvestmentCost}[1][\iGenerator,\iYear]{I^{\mathrm{C}}_{#1}}
\newcommand{\cInvestmentCost}[1][\iYear]{\mathrm{INV}_{#1}}
\newcommand{\cInterestRate}{i}
\newcommand{\cAssetLifetime}[1][\iGenerator]{A_{#1}}
\newcommand{\cTotalPresentValue}[1][]{\mathrm{TPV}_{#1}}
%\newcommand{\cInvestmentSize}{X^{\mathrm{C,T}}_{\iGenerator,\iInvestmentSizeOption}}
\newcommand{\cBuildLimitWind}{B^{\mathrm{C,\mathrm{W}}}_{\iZone}}
\newcommand{\cBuildLimitSolar}{B^{\mathrm{C,\mathrm{S}}}_{\iZone}}
\newcommand{\cBuildLimitStorage}{B^{\mathrm{C,\mathrm{Q}}}_{\iZone}}
\newcommand{\cReserveUpRequirement}[1][\iRegion]{D^{+}_{#1}}
%\newcommand{\cUpTimeMin}[1][\iGenerator]{TU_{#1}}
%\newcommand{\cDownTimeMin}[1][\iGenerator]{TD_{#1}}
\newcommand{\cRampRateUp}[1][\iGenerator]{RU_{#1}}
\newcommand{\cRampRateDown}[1][\iGenerator]{RD_{#1}}
\newcommand{\cPowerOutputMin}[1][\iGenerator]{\underline{P}_{#1}}
%\newcommand{\cStartupDuration}[1][\iGenerator]{SU_{#1}^{\mathrm{D}}}
%\newcommand{\cStartupTrajectory}[1][\iGenerator,\iIntervalAlias]{P^{\mathrm{SU}}_{#1}}
%\newcommand{\cShutdownDuration}[1][\iGenerator]{SD_{#1}^{\mathrm{D}}}
%\newcommand{\cShutdownTrajectory}[1][\iGenerator,\iIntervalAlias]{P^{\mathrm{SD}}_{#1}}
\newcommand{\cCapacityFactorWind}[1][\iGenerator,\iYear,\iScenario,\iInterval]{Q_{#1}^{\mathrm{W}}}
\newcommand{\cCapacityFactorSolar}[1][\iGenerator,\iYear,\iScenario,\iInterval]{Q_{#1}^{\mathrm{S}}}
\newcommand{\cPowerChargingMax}[1][\iGenerator]{\overline{P}^{\mathrm{in}}_{#1}}
\newcommand{\cPowerDischargingMax}[1][\iGenerator]{\overline{P}^{\mathrm{out}}_{#1}}
\newcommand{\cStorageUnitEnergyMax}[1][\iGenerator]{\overline{Q}_{#1}}
\newcommand{\cStorageUnitEnergyIntervalEndMax}[1][\iGenerator]{\overline{Q}^{\mathrm{end}}_{#1}}
\newcommand{\cStorageUnitEnergyIntervalEndMin}[1][\iGenerator]{\underline{Q}^{\mathrm{end}}_{#1}}
\newcommand{\cStorageUnitEfficiencyCharging}{\eta_{\iGenerator}^{\mathrm{in}}}
\newcommand{\cStorageUnitEfficiencyDischarging}{\eta_{\iGenerator}^{\mathrm{out}}}
\newcommand{\cDemand}[1][\iZone,\iYear,\iScenario,\iInterval]{D_{#1}}
\newcommand{\cIncidenceMatrix}[1][\iZone,\iLink]{K_{#1}}
\newcommand{\cOperatingCostLostLoad}[1][\iYear,\iScenario]{\mathrm{OP}^{\mathrm{L}}_{#1}}
\newcommand{\cPowerFlowMin}{\underline{P}_{\iLink}^{L}}
\newcommand{\cPowerFlowMax}{\overline{P}_{\iLink}^{L}}
\newcommand{\cEmmissionsCumulativeTarget}{\overline{E}}
\newcommand{\cSchemeRevenueCumulativeTarget}{\overline{R}}
\newcommand{\cLostLoadCost}{C^{\mathrm{L}}}
%\newcommand{\cReserveUpViolationPenalty}{C^{\mathrm{R}}}
%\newcommand{\cOperatingCostReserveUpViolation}[1][\iYear,\iScenario]{\mathrm{OP}^{\mathrm{R}}_{#1}}
%\newcommand{\cPowerOutputMinProportion}{\cPowerOutputMin^{\mathrm{f}}}
\newcommand{\cEmissionsTargetViolationPenalty}{C^{\mathrm{E}}}
\newcommand{\cEmissionsViolationTotalCost}{\mathrm{PEN}}
\newcommand{\cObjectiveFunction}{\mathrm{COST}}
\newcommand{\cOperatingCostScenario}[1][\iYear,\iScenario]{\mathrm{SCEN}_{#1}}
\newcommand{\cRetirementIndicator}[1][\iGenerator,\iYear]{F_{#1}}
\newcommand{\cEmissionsTotal}{E^{\mathrm{TOT}}}
%\newcommand{\cRampRateStartup}[1][\iGenerator]{SU_{#1}}
%\newcommand{\cRampRateShutdown}[1][\iGenerator]{SD_{#1}}
\newcommand{\cPowerOutputHydro}[1][\iGenerator,\iYear,\iScenario,\iInterval]{P^{\mathrm{H}}_{#1}}
\newcommand{\cDiscountRate}[1][\iYear]{\delta_{#1}}
\newcommand{\cPowerInitial}[1][\iGenerator,\iYear,\iScenario]{P_{#1}^{0}}
\newcommand{\cPowerOutInitial}[1][\iGenerator,\iYear,\iScenario]{\hat{P}_{#1}^{\mathrm{out}}}
\newcommand{\cStorageEnergyInitial}[1][\iGenerator,\iYear,\iScenario]{Q_{#1}^{0}}
\newcommand{\cLostLoadPowerInitial}[1][\iZone,\iYear,\iScenario]{P_{#1}^{\mathrm{V}}}
\newcommand{\cPowerInInitial}[1][\iGenerator,\iYear,\iScenario]{\hat{P}_{#1}^{\mathrm{in}}}

% Variables
\newcommand{\vBaseline}[1][\iYear]{\phi_{#1}}
\newcommand{\vPermitPrice}[1][\iYear]{\tau_{#1}}
\newcommand{\vEnergy}[1][\iGenerator,\iYear,\iScenario,\iInterval]{e_{#1}}
%\newcommand{\vStartupIndicator}[1][\iGenerator,\iYear,\iScenario,\iInterval]{v_{#1}}
%\newcommand{\vShutdownIndicator}[1][\iGenerator,\iYear,\iScenario,\iInterval]{w_{#1}}
\newcommand{\vInstalledCapacity}[1][\iGenerator,\iYear]{x^{\mathrm{C}}_{#1}}
%\newcommand{\vInvestmentSizeIndicator}[1][\iGenerator,\iYear,\iInvestmentSizeOption]{d_{#1}}
\newcommand{\vReserveUp}[1][\iGenerator,\iYear,\iScenario,\iInterval]{r^{+}_{#1}}
\newcommand{\vReserveUpViolation}[1][\iRegion,\iYear,\iScenario,\iInterval]{r^{\mathrm{V}}_{#1}}
%\newcommand{\vOnIndicator}[1][\iGenerator,\iYear,\iScenario,\iInterval]{u_{#1}}
\newcommand{\vPower}[1][\iGenerator,\iYear,\iScenario,\iInterval]{p_{#1}}
\newcommand{\vPowerTotal}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\hat{p}_{#1}}
\newcommand{\vPowerIn}[1][\iGenerator,\iYear,\iScenario,\iInterval]{p^{\mathrm{in}}_{#1}}
\newcommand{\vPowerOut}[1][\iGenerator,\iYear,\iScenario,\iInterval]{p^{\mathrm{out}}_{#1}}
\newcommand{\vStorageUnitEnergy}[1][\iGenerator,\iYear,\iScenario,\iInterval]{q_{#1}}
\newcommand{\vPowerFlow}[1][\iLink,\iYear,\iScenario,\iInterval]{p^{\sLinks}_{#1}}
\newcommand{\vLostLoadEnergy}[1][\iZone,\iYear,\iScenario,\iInterval]{e^{\mathrm{V}}_{#1}}
\newcommand{\vLostLoadPower}[1][\iZone,\iYear,\iScenario,\iInterval]{p^{\mathrm{V}}_{#1}}
\newcommand{\vEmissionsTargetViolation}{f^{\mathrm{E}}}
\newcommand{\vInstalledCapacityTotal}[1][\iGenerator,\iYear]{a_{#1}}
%\newcommand{\vInstalledCapacityTotalScenario}[1][\iGenerator,\iYear,\iScenario]{b_{#1}}
%\newcommand{\vInstalledCapacityOnStateAux}[1][\iGenerator,\iYear,\iScenario,\iInterval]{x_{#1}}
%\newcommand{\vInstalledCapacityStartupStateAux}[1][\iGenerator,\iYear,\iScenario,\iInterval]{y_{#1}}
%\newcommand{\vInstalledCapacityShutdownStateAux}[1][\iGenerator,\iYear,\iScenario,\iInterval]{z_{#1}}
\newcommand{\vFixedCapacityDual}[1][\iGenerator,\iYear,\iScenario]{\psi_{#1}}



\newcommand{\vEmissionsTotal}{E^{\mathrm{TOT}}_{\iYear}}
\newcommand{\cEmissionsTarget}{E^{\mathrm{TAR}}_{\iYear}}
\newcommand{\dPriceMetric}[1][\iYear]{\lambda^{\mathrm{R}}_{#1}}
\newcommand{\cMinimumSchemeRevenue}{\underline{R}}
\newcommand{\cEndOfHorizonCost}{\mathrm{EOH}}

% Investment problem - inequality constraint dual variables
\newcommand{\dNonNegativeCandidateCapacity}[1][\iGenerator,\iYear]{\mu_{#1}^{1}}
\newcommand{\dSolarBuildLimit}[1][\iZone,\iYear]{\mu_{#1}^{2}}
\newcommand{\dWindBuildLimit}[1][\iZone,\iYear]{\mu_{#1}^{3}}
\newcommand{\dStorageBuildLimit}[1][\iZone,\iYear]{\mu_{#1}^{4}}

% Investment problem - equality constraint dual variables
\newcommand{\dTotalInstallCapacity}[1][\iGenerator,\iYear]{\nu_{#1}^{1}}

% Operating scenario - inequality constraint dual variables
\newcommand{\dMinPowerOutput}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{1}}
\newcommand{\dMaxPowerOutputExistingThermal}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{2}}
\newcommand{\dMaxPowerOutputCandidateThermal}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{3}}
\newcommand{\dMaxPowerOutputWindExisting}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{4}}
\newcommand{\dMaxPowerOutputWindCandidate}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{5}}
\newcommand{\dMaxPowerOutputSolarExisting}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{6}}
\newcommand{\dMaxPowerOutputSolarCandidate}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{7}}
\newcommand{\dMaxPowerOutputHydro}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{8}}
\newcommand{\dNonNegativeCharging}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{9}}
\newcommand{\dNonNegativeDischarging}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{10}}
\newcommand{\dMaxChargingRateExisting}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{11}}
\newcommand{\dMaxChargingRateCandidate}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{12}}
\newcommand{\dMaxDischargingRateExisting}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{13}}
\newcommand{\dMaxDischargingRateCandidate}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{14}}
\newcommand{\dNonNegativeStorageEnergy}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{15}}
\newcommand{\dMaxStorageEnergyExisting}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{16}}
\newcommand{\dMaxStorageEnergyCandidate}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{17}}
\newcommand{\dMinStorageEnergyIntervalEnd}[1][\iGenerator,\iYear,\iScenario]{\sigma_{#1}^{18}}
\newcommand{\dMaxStorageEnergyIntervalEnd}[1][\iGenerator,\iYear,\iScenario]{\sigma_{#1}^{19}}
\newcommand{\dRampRateUp}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{20}}
\newcommand{\dRampRateUpStorageCharging}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{21}}
\newcommand{\dRampRateUpStorageDischarging}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{22}}
\newcommand{\dRampRateDown}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{23}}
\newcommand{\dRampRateDownStorageCharging}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{24}}
\newcommand{\dRampRateDownStorageDischarging}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{25}}
\newcommand{\dNonNegativeLostLoad}[1][\iZone,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{26}}
\newcommand{\dMinPowerFlow}[1][\iLink,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{27}}
\newcommand{\dMaxPowerFlow}[1][\iLink,\iYear,\iScenario,\iInterval]{\sigma_{#1}^{28}}




% Operating scenario - equality constraint dual variables
\newcommand{\dPowerBalance}[1][\iZone,\iYear,\iScenario,\iInterval]{\lambda_{#1}}
\newcommand{\dStorageEnergyTransition}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\zeta_{#1}^{1}}
\newcommand{\dGeneratorEnergyOutput}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\zeta_{#1}^{2}}
\newcommand{\dStorageEnergyOutput}[1][\iGenerator,\iYear,\iScenario,\iInterval]{\zeta_{#1}^{3}}
\newcommand{\dLostLoadEnergy}[1][\iZone,\iYear,\iScenario,\iInterval]{\zeta_{#1}^{4}}


\let\oldnorm\norm   % <-- Store original \norm as \oldnorm
\let\norm\undefined % <-- "Undefine" \norm
\DeclarePairedDelimiter\norm{\lVert}{\rVert}

% Operators
\DeclareMathOperator*{\minimise}{minimise}
\DeclareMathOperator*{\maximise}{maximise}

\newcommand{\sScenarioSets}{\quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals}

\begin{document}
	\maketitle
	
	\section{Notation}
	\renewcommand*{\arraystretch}{1.3}
	\begin{longtable}{ p{.09\textwidth}  p{.75\textwidth}}
		\textbf{Symbol} & \textbf{Description}\\
		\hline\hline
		\multicolumn{2}{l}{\textbf{Indices}}\\
		$\iGenerator$ & Generator\\ 
		$\iYear$ & Year\\
		$\iYearAlias$ & Year alias\\
		$\iYearTerminal$ & Final year in model horizon\\
		$\iScenario$ & Scenario\\
		$\iScenarioAlias$ & Scenario alias\\
		$\iInterval$ & Interval\\
		$\iIntervalAlias$ & Interval alias\\
		$\iIntervalTerminal$ & Final interval\\
		$\iZone$ & NEM zone\\
		$\iRegion$ & NEM region\\
%		$\iInvestmentSizeOption$ & Investment size option\\
		$\iLink$ & Link connecting adjacent NEM zones\\
		& \\
		\multicolumn{2}{l}{\textbf{Sets}}\\
		$\sGenerators$ & All generators\\
		$\sGeneratorsExisting$ & Existing generators\\
		$\sGeneratorsExistingThermal$ & Existing thermal generators\\
		$\sGeneratorsExistingWind$ & Existing wind units\\
		$\sGeneratorsExistingSolar$ & Existing solar units\\
		$\sGeneratorsCandidate$ & Candidate generators\\
		$\sGeneratorsCandidateThermal$ & Candidate thermal generators\\
		$\sGeneratorsCandidateWind$ & Candidate wind units\\
		$\sGeneratorsCandidateSolar$ & Candidate solar units\\
		$\sGeneratorsThermal$ & All thermal generators\\
		$\sGeneratorsHydro$ & Hydro generators\\
		$\sStorage$ & All storage units\\
		$\sStorageExisting$ & Existing storage units\\
		$\sStorageCandidate$ & Candidate storage units\\
		$\sYears$ & Years in model horizon\\
		$\sScenarios$ & Operating scenarios\\
		$\sIntervals$ & Time intervals\\
		$\sZones$ & NEM zones\\
		$\sRegions$ & NEM regions\\
%		$\sInvestmentSizeOptions$ & Investment size options\\
%		$\sInvestmentSizeOptionsGenerator$ & Investment size options for generator $\iGenerator$\\
%		$\sGeneratorsExistingThermalQuickStart$ & Existing quick-start thermal generators\\
%		$\sGeneratorsCandidateThermalQuickStart$ & Candidate quick-start thermal generators\\
%		$\sGeneratorsThermalQuickStart$ & All quick-start thermal generators\\
%		$\sGeneratorsExistingThermalSlowStart$ & Existing slow-start generators\\
		$\sLinks$ & Links connecting NEM zones\\
		$\sScenariosYear$ & Operating scenarios constituting with year $\iYear$\\
		& \\
		\multicolumn{2}{l}{\textbf{Variables}}\\
		$\vBaseline$ & Emissions intensity baseline [tCO$_{2}$/MWh]\\
		$\vPermitPrice$ & Permit price [\$/tCO$_{2}$]\\
%		$\vOnIndicator$ & On indicator [--]\\
%		$\vStartupIndicator$ & Startup indicator [--]\\
%		$\vShutdownIndicator$ & Shutdown indicator [--]\\
		$\vPower$ & Generator power output [MW]\\
		$\vPowerIn$ & Storage unit charging power [MW]\\
		$\vPowerOut$ & Storage unit discharging power [MW]\\
%		$\vPowerTotal$ & Total power output [MW]\\
%		$\vPowerIn$ & Total charging power (storage unit) [MW]\\
%		$\vPowerOut$ & Total discharging power (storage unit) [MW]\\
%		$\vReserveUp$ & Reserve provision [MW]\\
%		$\vReserveUpViolation$ & Up-reserve constraint violation [MW]\\
		$\vEnergy$ & Energy output [MWh]\\
		$\vStorageUnitEnergy$ & Energy within storage unit [MWh]\\
		$\vLostLoadPower$ & Lost load power [MW]\\
		$\vLostLoadEnergy$ & Lost load energy [MWh]\\
		$\vPowerFlow$ & Powerflow over link connecting adjacent NEM zones [MW]\\
%		$\vEmissionsTargetViolation$ & Emissions target violation [tCO$_{2}$]\\
		$\vInstalledCapacity$ & Capacity installed in year $\iYear$ [MW]\\
%		$\vInvestmentSizeIndicator$ & Investment size indicator [--]\\
		$\vInstalledCapacityTotal$ & Total capacity available in year $\iYear$ [MW]\\
%		$\vInstalledCapacityTotalScenario$ & Total installed capacity for scenario $\iScenario$ [MW]\\
%		$\vInstalledCapacityOnStateAux$ & Auxiliary variable - installed capacity and on-state interaction [--]\\
%		$\vInstalledCapacityStartupStateAux$ & Auxiliary variable - installed capacity and startup-state interaction [--]\\
%		$\vInstalledCapacityShutdownStateAux$ & Auxiliary variable - installed capacity and shutdown-state interaction [--]\\
		& \\
		\multicolumn{2}{l}{\textbf{Parameters}}\\
		$\cObjectiveFunction$ & Total cost over model horizon [\$]\\
		$\cTotalPresentValue$ & Total present value of operating, investment, and FOM costs [\$]\\
		$\cInvestmentCost$ & Total investment cost [\$]\\
		$\cFixedOperationsMaintenanceCost$ & Total fixed operations and maintenance cost for year $\iYear$ [\$]\\
		$\cEmissionsViolationTotalCost$ & Cost of violating emissions target [\$]\\
		$\cOperatingCostScenario$ & Total cost for scenario $\iScenario$ in year $\iYear$ [\$]\\
		$\cOperatingCost$ & Total operating cost for scenario $\iScenario$ in year $\iYear$ [\$]\\
		$\cOperatingCostThermal$ & Cost to operate thermal units for scenario $\iScenario$ in year $\iYear$ [\$]\\
		$\cOperatingCostHydro$ & Cost to operate hydro units for scenario $\iScenario$ in year $\iYear$ [\$]\\
		$\cOperatingCostWind$ & Cost to operate wind units for scenario $\iScenario$ in year $\iYear$ [\$]\\
		$\cOperatingCostSolar$ & Cost to operate solar units for scenario $\iScenario$ in year $\iYear$ [\$]\\
		$\cOperatingCostStorage$ & Cost to operate storage units for scenario $\iScenario$ in year $\iYear$ [\$]\\
%		$\cOperatingCostReserveUpViolation$ & Cost of reserve violation [\$]\\
		$\cOperatingCostLostLoad$ & Lost load cost [\$]\\
		$\cCandidateInvestmentCost$ & Candidate unit investment cost [\$/MW]\\
		$\cLostLoadCost$ & Lost load penalty [\$/MWh]\\
%		$\cReserveUpViolationPenalty$ & Minimum upward reserve violation [MW]\\
		$\cFixedOperationsMaintenanceCostGenerator$ & Fixed operations and maintenance cost for generator $\iGenerator$ [\$]\\
		$\cEmissionsTargetViolationPenalty$ & Emissions target violation penalty [\$/tCO$_{2}$]\\
		$\cMarginalCost$ & Short-run marginal cost [\$/MWh]\\
%		$\cStartupCost$ & Normalised startup-cost [\$/MW]\\
%		$\cShutdownCost$ & Normalised shutdown-cost [\$/MW]\\
		$\cAmortisationRate$ & Amorisation rate [--]\\
		$\cInterestRate$ & Interest rate (weighted average cost of capital) [--]\\
		$\cAssetLifetime$ & Asset lifetime [years]\\
%		$\cInvestmentSize$ & Investment size option [MW]\\
		$\cScenarioDuration$ & Scenario duration [h]\\
		$\cRetirementIndicator$ & Retirement indicator [--]\\
		$\cEmissionsIntensity$ & Emissions intensity for generator $\iGenerator$\\
		$\cPowerOutputMax$ & Maximum power output [MW]\\
		$\cPowerOutputMin$ & Minimum power output [MW]\\
%		$\cPowerOutputMinProportion$ & Minimum dispatchable output level as a proportion of total capacity [--]\\
		$\cPowerOutputHydro$ & Hydro power output [MW]\\
%		$\cUpTimeMin$ & Minimum up time [hours]\\
%		$\cDownTimeMin$ & Minimum down time [hours]\\
%		$\cStartupDuration$ & Hours required to reach minimum dispatchable output following startup [hours]\\
%		$\cShutdownDuration$ & Hours required to transition from minimum dispatchable output to zero MW [hours]\\
%		$\cStartupTrajectory$ & Power output along startup trajectory [MW]\\
%		$\cShutdownTrajectory$ & Power output along shutdown trajectory [MW]\\
		$\cRampRateUp$ & Ramp rate up (normal operation) [MW/h]\\
		$\cRampRateDown$ & Ramp down up (normal operation) [MW/h]\\
%		$\cRampRateStartup$ & Ramp rate (startup) [MW/h]\\
%		$\cRampRateShutdown$ & Ramp rate (shutdown) [MW/h]\\
		$\cPowerChargingMax$ & Storage unit maximum charging power [MW]\\
		$\cPowerDischargingMax$ & Storage unit maximum discharging power [MW]\\
		$\cStorageUnitEnergyMax$ & Storage unit maximum energy capacity [MWh]\\
		$\cStorageUnitEnergyIntervalEndMax$ & Storage unit maximum energy at end of operating scenario [MWh]\\
		$\cStorageUnitEnergyIntervalEndMin$ & Storage unit minimum energy at end of operating scenario [MWh]\\
		$\cStorageUnitEfficiencyCharging$ & Storage unit charging efficiency [--]\\
		$\cStorageUnitEfficiencyDischarging$ & Storage unit discharging efficiency [--]\\
		$\cDemand$ & Demand [MW]\\
		$\cReserveUpRequirement$ & Minimum up reserve requirement [MW]\\
		$\cCapacityFactorWind$ & Capacity factor for wind units [--]\\
		$\cCapacityFactorSolar$ & Capacity factor for solar units [--]\\
		$\cBuildLimitWind$ & Build limit for wind units in zone $\iZone$ [MW]\\
		$\cBuildLimitSolar$ & Build limit for solar units in zone $\iZone$ [MW]\\
		$\cBuildLimitStorage$ & Build limit for storage units in zone $\iZone$ [MW]\\
		$\cIncidenceMatrix$ & Network incidence matrix [--]\\
		$\cPowerFlowMin$ & Minimum powerflow over link $\iLink$ [MW]\\
		$\cPowerFlowMax$ & Maximum powerflow over link $\iLink$ [MW]\\
		$\cEmissionsTotal$ & Total emissions [tCO$_{2}$]\\
		$\cEmmissionsCumulativeTarget$ & Cumulative emissions target [tCO$_{2}$]\\
		$\cSchemeRevenueCumulativeTarget$ & Cumulative scheme revenue target [\$]\\
		\hline
		\caption{Notation}
	\end{longtable}

\section{Linearised model}
Serious convergence and computational difficulties are associated with modelling operating scenarios using an MINLP. A linearised version of the aforementioned model is presented in this section, which is more amenable to standard decomposition procedures, and much more computationally tractable.

\subsection{Model outline}
\begin{alignat}{3}
& \minimise\limits_{\bm{u}, \bm{v}, \bm{x}, \bm{\mu}, \bm{\nu}, \bm{\sigma}, \bm{\zeta}} \quad && f\left(\bm{u}, \bm{v}, \bm{x}, \bm{\mu}, \bm{\nu}, \bm{\sigma}, \bm{\zeta}\right) \nonumber\\
& \textrm{subject to} \nonumber\\
& && \bm{a}(\bm{x}, \bm{u}, \bm{v}) \leq 0\\
& && \bm{b}(\bm{x}, \bm{u}, \bm{v}) = 0\\
& \\\nonumber
& && \minimise\limits_{\bm{u}, \bm{v}} \quad && g(\bm{u}, \bm{v}, \bm{\overline{x}}) = p(\bm{u}) + q(\bm{u}, \bm{v}, \bm{\overline{x}}) \nonumber\\
& && \textrm{subject to} \nonumber\\
& && && \bm{c}(\bm{u}) \leq 0 \quad \left(\bm{\mu}\right) \\
& && && \bm{d}(\bm{u}) = 0 \quad \left(\bm{\nu}\right)\\
& && && \bm{m}(\bm{u}, \bm{v}, \bm{\overline{x}}) \leq 0 \quad \left(\bm{\sigma}\right)\\
& && && \bm{n}(\bm{u}, \bm{v}, \bm{\overline{x}}) = 0 \quad \left(\bm{\zeta}\right)\\\nonumber
\end{alignat}

\subsection{Upper-level objective}
The goal is to calibrate policy parameters such that price, scheme, and emissions objectives are in some way optimised. The objective function should be sufficiently flexible to handle different combinations of policy objectives. A proposed objective function could take the following form:

\begin{equation}
	\minimise\limits_{} \quad \alpha \sum\limits_{\iYear} \norm[\big]{\vEmissionsTotal - \cEmissionsTarget}_{1} + \beta \sum\limits_{\iYear} \norm[\big]{\dPriceMetric - \dPriceMetric[\iYear - 1]}_{1} + \gamma \sum\limits_{\iYear} \norm[\big]{\vBaseline -\vBaseline[\iYear-1]}_{1} + \kappa \sum\limits_{\iYear} \norm[\big]{\vPermitPrice - \vPermitPrice[\iYear - 1]}_{1}
\end{equation}

subject to

\begin{equation}
	\vBaseline \geq 0 \quad \forall \iYear \in \sYears
\end{equation}

\begin{equation}
	\vPermitPrice \geq 0 \quad \forall \iYear \in \sYears
\end{equation}

\begin{equation}
	\sum\limits_{\iYear \in \sYears} \sum\limits_{\iScenario \in \sScenarios} \cScenarioDuration \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidate \cup \sGeneratorsExistingThermal}\left(\cEmissionsIntensity -\vBaseline\right)\vPermitPrice \vEnergy \geq \cMinimumSchemeRevenue
\end{equation}

\subsection{Lower-level problem}
The lower-level problem consists of the generation and investment plan for the system. From the system planner's perspective, policy variables are fixed and can be treated as constants. This allows the lower-level problem to be treated as a linear program, allowing strong-duality properties to assist with the bi-level program's reformulation.

\begin{equation}
	\minimise \quad \sum\limits_{\iYear\in\sYears} \cDiscountRate \left[\cInvestmentCost + \cFixedOperationsMaintenanceCost + \sum\limits_{\iScenario \in \sScenarios} \cScenarioDuration \cOperatingCostScenario \right]
\end{equation}

Terms within the objective are as follows:

Thermal generators:
\begin{equation}
	\cOperatingCostThermal = \sum\limits_{\iInterval} \sum\limits_{\iGenerator \in \sGeneratorsThermal} \left[\cMarginalCost + (\cEmissionsIntensity - \vBaseline)\vPermitPrice\right]\vPower\\
\end{equation}

Hydro generators:
\begin{equation}
	\cOperatingCostHydro = \sum\limits_{\iInterval}\sum\limits_{\iGenerator \in \sGeneratorsHydro}\cMarginalCost \vPower
\end{equation}

Wind generators:
\begin{equation}
	\cOperatingCostWind = \sum\limits_{\iInterval}\left[\sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \cMarginalCost \vEnergy + \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \left[\cMarginalCost - \vBaseline \vPermitPrice\right] \vPower\right]
\end{equation}

Solar generators:
\begin{equation}
	\cOperatingCostSolar = \sum\limits_{\iInterval}\left[\sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \cMarginalCost \vEnergy + \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \left[\cMarginalCost - \vBaseline\vPermitPrice\right] \vPower\right]
\end{equation}

Storage units:
\begin{equation}
	\cOperatingCostStorage = \sum\limits_{\iInterval}\sum\limits_{\iGenerator \in \sStorage} \cMarginalCost \vPowerOut
\end{equation}

Value of lost load:
\begin{equation}
	\cOperatingCostLostLoad = \sum\limits_{\iInterval}\sum\limits_{\iZone \in \sZones} \cLostLoadCost \vLostLoadPower
\end{equation}

Total operating cost for a given scenario, $\iScenario$:
\begin{equation}
	\cOperatingCostScenario = \cOperatingCostThermal + \cOperatingCostHydro + \cOperatingCostWind + \cOperatingCostSolar + \cOperatingCostStorage + \cOperatingCostLostLoad
\end{equation}

Total operating cost for a given year, $\iYear$:

\begin{equation}
	\cOperatingCost[\iYear] = \sum\limits_{\iScenario \in \sScenarios} \cScenarioDuration \cOperatingCostScenario
\end{equation}

\subsubsection{Fixed operation and maintenance (FOM) costs}

%\begin{equation}
%	\cFixedOperationsMaintenanceCost = \left[\sum\limits_{\iGenerator \in \sGeneratorsCandidate} \cFixedOperationsMaintenanceCostGenerator \vInstalledCapacityTotal + \sum\limits_{\iGenerator \in \sGeneratorsExisting} \cFixedOperationsMaintenanceCostGenerator \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right) \right]
%\end{equation}

\begin{equation}
\cFixedOperationsMaintenanceCost = \sum\limits_{\iGenerator \in \sGeneratorsCandidate} \cFixedOperationsMaintenanceCostGenerator \vInstalledCapacityTotal
\end{equation}

\subsubsection{Investment cost}

\begin{equation}
	\cInvestmentCost = \frac{1}{\cInterestRate}\sum\limits_{g\in \sGeneratorsCandidate} \cAmortisationRate  \cCandidateInvestmentCost \vInstalledCapacity
\end{equation}

Where $\cAmortisationRate$ is the amortisation rate for the investment is given by:

\begin{equation}
	\cAmortisationRate = \frac{\cInterestRate(1+\cInterestRate)^{\cAssetLifetime}}{(1+\cInterestRate)^{\cAssetLifetime} - 1}
\end{equation}

\subsubsection{End-of-horizon cost}
This term assumes that the operating costs incurred in the last year of the model's horizon occur in all future years. This prevents investment from being biased towards the start of the model horizon.

\begin{equation}
	\cEndOfHorizonCost = \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} 
%	\left(
%	\cOperatingCost[\iYearTerminal] 
%	+ 
	\cFixedOperationsMaintenanceCost[\iYearTerminal] 
%	\right)
\end{equation}

\subsubsection{Total present value}
In order to take into account the time value of money a discount rate should be applied to terms within the objective. This allows operational cost values to be expressed in terms or a common base. Let the discount rate be denoted by:

\begin{equation}
	\cDiscountRate = \frac{1}{(1 + \cInterestRate)^{\iYear}}
\end{equation}

Total present value over the planning horizon is then:
\begin{align}
	\begin{split}
		\cTotalPresentValue & = \sum\limits_{\iYear \in \sYears} \cDiscountRate \left[\cInvestmentCost + \cFixedOperationsMaintenanceCost + \cOperatingCost[\iYear] \right] 
		+ \cEndOfHorizonCost \\
	\end{split}
\end{align}

\subsubsection{Investment constraints}
Continuous capacity sizing for candidate generators:

\begin{equation}
	- \vInstalledCapacity[\iGenerator,\iYear] \leq 0 \quad (\dNonNegativeCandidateCapacity) \quad \forall \iGenerator \in \sGeneratorsCandidate \quad \forall \iYear \in \sYears
\end{equation}

%Introduce auxiliary variables to denote the total capacity installed at each point in time:
%\begin{equation}
%	\vInstalledCapacityTotal - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] = 0 \quad (\dTotalInstallCapacity) \quad \forall \iGenerator \in \sGeneratorsCandidate \quad \forall \iYear \in \sYears
%\end{equation}

%Build limits for different technologies in each zone:
%
%\begin{equation}
%\sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar_{\iZone}} \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] - \cBuildLimitSolar \leq 0 \quad (\dSolarBuildLimit) \quad \forall \iZone \in \sZones \quad \forall \iYear \in \sYears
%\end{equation}

%\begin{equation}
%	\sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar_{\iZone}} \vInstalledCapacityTotal - \cBuildLimitSolar \leq 0 \quad (\dSolarBuildLimit) \quad \forall \iZone \in \sZones \quad \forall \iYear \in \sYears
%\end{equation}

%\begin{equation}
%\sum\limits_{\iGenerator \in \sGeneratorsCandidateWind_{\iZone}} \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] - \cBuildLimitWind \leq 0 \quad (\dWindBuildLimit) \quad \forall \iZone \in \sZones \quad \forall \iYear \in \sYears 
%\end{equation}

%\begin{equation}
%	\sum\limits_{\iGenerator \in \sGeneratorsCandidateWind_{\iZone}} \vInstalledCapacityTotal - \cBuildLimitWind \leq 0 \quad (\dWindBuildLimit) \quad \forall \iZone \in \sZones \quad \forall \iYear \in \sYears 
%\end{equation}

%\begin{equation}
%	\sum\limits_{\iGenerator \in \sStorageCandidate_{\iZone}} \vInstalledCapacityTotal - \cBuildLimitStorage \leq 0  \quad (\dStorageBuildLimit) \quad \forall \iZone \in \sZones \quad \forall \iYear \in \sYears
%\end{equation}

\subsubsection{Operating constraints}
Minimum power output:
\begin{equation}
	-\vPower + \cPowerOutputMin \leq 0 \quad (\dMinPowerOutput) \quad \forall \iGenerator \in \sGenerators \setminus \sStorage \sScenarioSets
\end{equation}

Total thermal power output:
\begin{equation}
	\vPower - \cPowerOutputMax \left(1 - \cRetirementIndicator\right) \leq 0 \quad (\dMaxPowerOutputExistingThermal) \quad \forall \iGenerator \in \sGeneratorsExistingThermal \sScenarioSets
\end{equation}

\begin{equation}
	\vPower - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] \leq 0 \quad (\dMaxPowerOutputCandidateThermal) \quad \forall \iGenerator \in \sGeneratorsCandidateThermal \sScenarioSets
\end{equation}

Total power output from wind generators:
\begin{equation}
	\vPower - \cCapacityFactorWind \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right) \leq 0 \quad (\dMaxPowerOutputWindExisting) \quad \forall \iGenerator \in \sGeneratorsExistingWind \sScenarioSets
\end{equation}

\begin{equation}
	\vPower - \cCapacityFactorWind \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] \leq 0 \quad (\dMaxPowerOutputWindCandidate) \quad \forall \iGenerator \in \sGeneratorsCandidateWind \sScenarioSets
\end{equation}

Total power output - solar units:
\begin{equation}
	\vPower - \cCapacityFactorSolar \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right) \leq 0 \quad (\dMaxPowerOutputSolarExisting) \quad \forall \iGenerator \in \sGeneratorsExistingSolar \sScenarioSets
\end{equation}

\begin{equation}
	\vPower - \cCapacityFactorSolar \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] \leq 0 \quad (\dMaxPowerOutputSolarCandidate) \quad \forall \iGenerator \in \sGeneratorsCandidateSolar \sScenarioSets
\end{equation}

Total power output - hydro units (may need to adjust notation for max hydro output):
\begin{equation}
	\vPower - \cPowerOutputHydro \left(1 - \cRetirementIndicator\right) \leq 0 \quad (\dMaxPowerOutputHydro) \quad \forall \iGenerator \in \sGeneratorsHydro \sScenarioSets
\end{equation}

Storage units:
\begin{equation}
	-\vPowerIn \leq 0 \quad (\dNonNegativeCharging) \quad \forall \iGenerator \in \sStorage \sScenarioSets
\end{equation}

\begin{equation}
	-\vPowerOut \leq 0 \quad (\dNonNegativeDischarging) \quad \forall \iGenerator \in \sStorage \sScenarioSets
\end{equation}

\begin{equation}
	\vPowerIn - \cPowerChargingMax \left(1 - \cRetirementIndicator\right) \leq 0 \quad (\dMaxChargingRateExisting) \quad \forall \iGenerator \in \sStorageExisting \sScenarioSets
\end{equation}

\begin{equation}
	\vPowerIn - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] \leq 0 \quad (\dMaxChargingRateCandidate) \quad \forall \iGenerator \in \sStorageCandidate \sScenarioSets
\end{equation}

\begin{equation}
	\vPowerOut - \cPowerDischargingMax \left(1 - \cRetirementIndicator\right) \leq 0 \quad (\dMaxDischargingRateExisting) \quad \forall \iGenerator \in \sStorageExisting \sScenarioSets
\end{equation}

\begin{equation}
	\vPowerOut - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] \leq 0 \quad (\dMaxDischargingRateCandidate) \quad \forall \iGenerator \in \sStorageCandidate \sScenarioSets
\end{equation}

\begin{equation}
	- \vStorageUnitEnergy \leq 0 \quad (\dNonNegativeStorageEnergy) \quad \forall \iGenerator \in \sStorage \sScenarioSets
\end{equation}

\begin{equation}
	\vStorageUnitEnergy - \cStorageUnitEnergyMax \leq 0 \quad (\dMaxStorageEnergyExisting) \quad \forall \iGenerator \in \sStorageExisting \sScenarioSets
\end{equation}

\begin{equation}
	\vStorageUnitEnergy - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] \leq 0 \quad (\dMaxStorageEnergyCandidate) \quad \forall \iGenerator \in \sStorageCandidate \sScenarioSets
\end{equation}

\begin{equation}
	\cStorageUnitEnergyIntervalEndMin - \vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]\leq  0 \quad (\dMinStorageEnergyIntervalEnd) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
\end{equation}

\begin{equation}
	\vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \cStorageUnitEnergyIntervalEndMax \leq  0 \quad (\dMaxStorageEnergyIntervalEnd) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
\end{equation}

\begin{equation}
	- \vStorageUnitEnergy + \vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iInterval-1] + \cStorageUnitEfficiencyCharging \vPowerIn - \frac{1}{\cStorageUnitEfficiencyDischarging} \vPowerOut = 0 \quad (\dStorageEnergyTransition) \quad \forall \iGenerator \in \sStorage \sScenarioSets \setminus \{\iIntervalStart\}
\end{equation}

\begin{equation}
	- \vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cStorageEnergyInitial + \cStorageUnitEfficiencyCharging \vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \frac{1}{\cStorageUnitEfficiencyDischarging} \vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalStart] = 0 \quad (\dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
\end{equation}

%Ramp-rate up constraint - all generators excluding storage units:
%\begin{equation}
%	\vPower - \vPower[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateUp \leq 0 \quad (\dRampRateUp) \quad \forall \iGenerator \in \sGenerators \setminus \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%	\vPower[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \cPowerInitial - \cRampRateUp \leq 0 \quad (\dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sGenerators \setminus \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}
%
%
%Ramp-rate up constraint - storage unit charging power:
%\begin{equation}
%\vPowerIn - \vPowerIn[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateUp \leq 0 \quad (\dRampRateUpStorageCharging) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%
%
%\begin{equation}
%\vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \cPowerInInitial - \cRampRateUp \leq 0 \quad (\dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}
%
%Ramp-rate up constraint - storage unit discharging power:
%\begin{equation}
%\vPowerOut - \vPowerOut[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateUp \leq 0 \quad (\dRampRateUpStorageDischarging) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%\vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \cPowerOutInitial - \cRampRateUp \leq 0 \quad (\dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}
%
%Ramp-rate down constraint - all generators excluding storage units:
%\begin{equation}
%	- \vPower + \vPower[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateDown \leq 0 \quad (\dRampRateDown) \quad \forall \iGenerator \in \sGenerators \setminus \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%- \vPower[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cPowerInitial - \cRampRateDown \leq 0 \quad (\dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sGenerators\setminus \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}
%
%Ramp-rate down constraint - storage unit charging power:
%\begin{equation}
%-\vPowerIn + \vPowerIn[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateDown \leq 0 \quad (\dRampRateDownStorageCharging) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%-\vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cPowerInInitial - \cRampRateDown \leq 0 \quad (\dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}
%
%Ramp-rate down constraint - storage unit discharging power:
%\begin{equation}
%-\vPowerOut + \vPowerOut[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateDown \leq 0 \quad (\dRampRateDownStorageDischarging) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%-\vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cPowerOutInitial - \cRampRateDown \leq 0 \quad (\dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}

Non-negative lost-load:
\begin{equation}
	- \vLostLoadPower \leq 0 \quad (\dNonNegativeLostLoad) \quad \forall \iZone \in \sZones \sScenarioSets
\end{equation}

Power flow between zones:
\begin{equation}
	\cPowerFlowMin - \vPowerFlow \leq 0 \quad (\dMinPowerFlow) \quad \forall \iLink \in \sLinks \sScenarioSets
\end{equation}

\begin{equation}
	\vPowerFlow - \cPowerFlowMax \leq 0 \quad (\dMaxPowerFlow) \quad \forall \iLink \in \sLinks \sScenarioSets
\end{equation}

Power balance for each zone:
\begin{equation}
\cDemand - \sum\limits_{\iGenerator \in \sGenerators_{\iZone} \setminus \sStorage_{\iZone}} \vPower - \sum\limits_{\iGenerator \in \sStorage_{\iZone}} \left(\vPowerOut - \vPowerIn\right) + \sum\limits_{\iLink \in \sLinks} \cIncidenceMatrix \vPowerFlow - \vLostLoadPower = 0 \quad (\dPowerBalance) \quad \forall \iZone \in \sZones \sScenarioSets
\end{equation}

%Energy from generator units:
%\begin{equation}
%	\vEnergy - \frac{\vPower[\iGenerator, \iYear,\iScenario,\iInterval-1] + \vPower}{2} = 0 \quad (\dGeneratorEnergyOutput) \quad \forall \iGenerator \in \sGenerators \setminus \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%	\vEnergy[\iGenerator, \iYear,\iScenario,\iIntervalStart] - \frac{\cPowerInitial + \vPower[\iGenerator, \iYear,\iScenario,\iIntervalStart]}{2} = 0 \quad (\dGeneratorEnergyOutput[\iGenerator, \iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sGenerators \setminus \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}

%\begin{equation}
%	\vEnergy - \frac{\vPowerOut[\iGenerator, \iYear,\iScenario,\iInterval-1] + \vPowerOut}{2} = 0 \quad (\dStorageEnergyOutput) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios  \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%	\vEnergy[\iGenerator, \iYear,\iScenario,\iIntervalStart] - \frac{\cPowerOutInitial + \vPowerOut[\iGenerator, \iYear,\iScenario,\iIntervalStart]}{2} = 0 \quad (\dStorageEnergyOutput[\iGenerator, \iYear,\iScenario,\iIntervalStart]) \quad \forall \iGenerator \in \sStorage \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}

%Lost-load energy:
%\begin{equation}
%	\vLostLoadEnergy - \frac{\vLostLoadPower[\iZone, \iYear,\iScenario,\iInterval-1] + \vLostLoadPower}{2} = 0 \quad (\dLostLoadEnergy) \quad \forall \iZone \in \sZones \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios \quad \forall \iInterval \in \sIntervals \setminus \{\iIntervalStart\}
%\end{equation}
%
%\begin{equation}
%	\vLostLoadEnergy[\iZone, \iYear,\iScenario,\iIntervalStart] - \frac{\cLostLoadPowerInitial + \vLostLoadPower[\iZone, \iYear,\iScenario,\iIntervalStart]}{2} = 0 \quad (\dLostLoadEnergy[\iZone, \iYear,\iScenario,\iIntervalStart]) \quad \forall \iZone \in \sZones \quad \forall \iYear \in \sYears \quad \forall \iScenario \in \sScenarios
%\end{equation}

\subsection{Lagrangian}

\begin{equation}
	\mathcal{L} = g(\bm{u}, \bm{v}, \overline{\bm{x}}) + \bm{\mu}^{T}\bm{c}(\bm{u}) + \bm{\nu}^{T}\bm{d}(\bm{u}) + \bm{\sigma}^{T}\bm{m}(\bm{u}, \bm{v}, \bm{\overline{x}}) + \bm{\zeta}^{T} \bm{n}(\bm{u}, \bm{v}, \bm{\overline{x}})
\end{equation}

Where:

\begin{alignat}{3}
	& && g(\bm{u}, \bm{v}, \overline{\bm{x}}) = \sum\limits_{\iYear \in \sYears} \cDiscountRate  &&  \left[\frac{1}{\cInterestRate} \sum\limits_{g\in \sGeneratorsCandidate} \cAmortisationRate  \cCandidateInvestmentCost \vInstalledCapacity + \sum\limits_{\iGenerator \in \sGeneratorsCandidate} \cFixedOperationsMaintenanceCostGenerator \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] 
%	+ \sum\limits_{\iGenerator \in \sGeneratorsExisting} \cFixedOperationsMaintenanceCostGenerator \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right) 
	\right. \nonumber\\ 
	& && + \sum\limits_{\iScenario \in \sScenarios} \cScenarioDuration \sum\limits_{\iInterval \in \sIntervals} && \left[\sum\limits_{\iGenerator \in \sGeneratorsThermal} \left[\cMarginalCost + (\cEmissionsIntensity - \vBaseline)\vPermitPrice\right]\vPower  + \sum\limits_{\iGenerator \in \sGeneratorsHydro}\cMarginalCost \vPower \right. \nonumber\\
	& && && + \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \cMarginalCost \vPower + \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \left[\cMarginalCost - \vBaseline \vPermitPrice\right] \vPower \nonumber\\
	& && && + \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \cMarginalCost \vPower + \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \left[\cMarginalCost - \vBaseline\vPermitPrice\right] \vPower\nonumber\\
	& && && + \sum\limits_{\iGenerator \in \sStorage} \cMarginalCost \vPowerOut \nonumber\\
	& && && \left.\left. + \sum\limits_{\iZone \in \sZones} \cLostLoadCost \vLostLoadPower \right]\right] \nonumber\\
%	& && + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} \left[\sum\limits_{\iScenario \in \sScenarios}  \cScenarioDuration[\iYearTerminal,\iScenario] \sum\limits_{\iInterval \in \sIntervals} \right. && \left[\sum\limits_{\iGenerator \in \sGeneratorsThermal} \left[\cMarginalCost[\iGenerator,\iYearTerminal] + (\cEmissionsIntensity - \vBaseline[\iYearTerminal])\vPermitPrice[\iYearTerminal]\right]\vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval]  + \sum\limits_{\iGenerator \in \sGeneratorsHydro}\cMarginalCost \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \right. \nonumber\\
%	& && && + \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \cMarginalCost \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \left[\cMarginalCost - \vBaseline[\iYearTerminal] \vPermitPrice[\iYearTerminal]\right] \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \nonumber\\
%	& && && + \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \cMarginalCost \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \left[\cMarginalCost - \vBaseline[\iYearTerminal]\vPermitPrice[\iYearTerminal]\right] \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \nonumber\\
%%%	& && && + \sum\limits_{\iGenerator \in \sStorage} \cMarginalCost \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \nonumber\\
%	& && && \left. + \sum\limits_{\iZone \in \sZones} \cLostLoadCost \vLostLoadPower[\iZone,\iYearTerminal,\iScenario,\iInterval] \right] \nonumber\\
	& && + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate}\sum\limits_{\iGenerator \in \sGeneratorsCandidate} \cFixedOperationsMaintenanceCostGenerator \sum\limits_{\iYearAlias \leq \iYearTerminal} \vInstalledCapacity[\iGenerator,\iYearAlias]\\
%	 \right]\\\nonumber
%	+ \sum\limits_{\iGenerator \in \sGeneratorsExisting} \cFixedOperationsMaintenanceCostGenerator \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator[\iGenerator,\iYearTerminal]\right)
	& && + \sum\limits_{\iScenario \in \sScenarios} \frac{\cDiscountRate[\iYearTerminal]\cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \sum\limits_{\iInterval \in \sIntervals} && \left[\sum\limits_{\iGenerator \in \sGeneratorsThermal} \left[\cMarginalCost[\iGenerator,\iYearTerminal] + (\cEmissionsIntensity - \vBaseline[\iYearTerminal])\vPermitPrice[\iYearTerminal]\right]\vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval]  + \sum\limits_{\iGenerator \in \sGeneratorsHydro}\cMarginalCost[\iGenerator,\iYearTerminal] \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \right. \nonumber\\
	& && && + \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \cMarginalCost[\iGenerator,\iYearTerminal] \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \left[\cMarginalCost[\iGenerator,\iYearTerminal] - \vBaseline[\iYearTerminal] \vPermitPrice[\iYearTerminal]\right] \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \nonumber\\
	& && && + \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \cMarginalCost[\iGenerator,\iYearTerminal] \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \left[\cMarginalCost[\iGenerator,\iYearTerminal] - \vBaseline[\iYearTerminal]\vPermitPrice[\iYearTerminal]\right] \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval]\nonumber\\
	& && && + \sum\limits_{\iGenerator \in \sStorage} \cMarginalCost[\iGenerator,\iYearTerminal] \vPowerOut[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \nonumber\\
	& && && \left.\left. + \sum\limits_{\iZone \in \sZones} \cLostLoadCost \vLostLoadPower[\iZone,\iYearTerminal,\iScenario,\iInterval] \right]\right] \nonumber\\
\end{alignat}

\begin{align}
\begin{split}
\bm{\mu}^{T}\bm{c}(\bm{u}) = & \sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sGeneratorsCandidate} \dNonNegativeCandidateCapacity \left(-\vInstalledCapacity\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iZone \in \sZones} \dSolarBuildLimit \left(\sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar_{\iZone}} \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias]  - \cBuildLimitSolar\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iZone \in \sZones} \dWindBuildLimit \left(\sum\limits_{\iGenerator \in \sGeneratorsCandidateWind_{\iZone}} \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias] - \cBuildLimitWind\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iZone \in \sZones} \dStorageBuildLimit \left(\sum\limits_{\iGenerator \in \sStorageCandidate_{\iZone}} \vInstalledCapacityTotal - \cBuildLimitStorage\right)\\
\end{split}
\end{align}

%\begin{equation}
%	\bm{\nu}^{T}\bm{d}(\bm{u}) = \sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sGeneratorsCandidate} \dTotalInstallCapacity \left(\vInstalledCapacityTotal - \sum\limits_{\iYearAlias\leq \iYear} \vInstalledCapacity\right)\\
%\end{equation}

\begin{align}
		\bm{\sigma}^{T}\bm{m}(\bm{u}, \bm{v}, \bm{\overline{x}}) = & \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dMinPowerOutput \left(-\vPower + \cPowerOutputMin\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingThermal} \dMaxPowerOutputExistingThermal \left(\vPower - \cPowerOutputMax \left(1 - \cRetirementIndicator\right)\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \dMaxPowerOutputCandidateThermal \left(\vPower - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias]\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \dMaxPowerOutputWindExisting \left(\vPower - \cCapacityFactorWind \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right) \right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \dMaxPowerOutputWindCandidate \left(\vPower - \cCapacityFactorWind \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias]\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \dMaxPowerOutputSolarExisting \left(\vPower - \cCapacityFactorSolar \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right)\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \dMaxPowerOutputSolarCandidate \left(\vPower - \cCapacityFactorSolar \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias]\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsHydro} \dMaxPowerOutputHydro \left(\vPower - \cPowerOutputHydro \left(1 - \cRetirementIndicator\right) \right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} \dNonNegativeCharging \left(-\vPowerIn\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} \dNonNegativeDischarging \left(-\vPowerOut\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageExisting} \dMaxChargingRateExisting \left(\vPowerIn - \cPowerChargingMax \left(1 - \cRetirementIndicator\right) \right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageCandidate} \dMaxChargingRateCandidate \left(\vPowerIn - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias]\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageExisting} \dMaxDischargingRateExisting \left(\vPowerOut - \cPowerDischargingMax \left(1 - \cRetirementIndicator\right)\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageCandidate} \dMaxDischargingRateCandidate \left(\vPowerOut - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias]\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} \dNonNegativeStorageEnergy \left(- \vStorageUnitEnergy\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageExisting} \dMaxStorageEnergyExisting \left(\vStorageUnitEnergy - \cStorageUnitEnergyMax\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageCandidate} \dMaxStorageEnergyCandidate \left(\vStorageUnitEnergy - \sum\limits_{\iYearAlias \leq \iYear} \vInstalledCapacity[\iGenerator,\iYearAlias]\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dMinStorageEnergyIntervalEnd \left(\cStorageUnitEnergyIntervalEndMin - \vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dMaxStorageEnergyIntervalEnd \left(\vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \cStorageUnitEnergyIntervalEndMax\right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dRampRateUp \left(\vPower - \vPower[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateUp\right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(\vPower[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \cPowerInitial - \cRampRateUp\right)\\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sStorage} \dRampRateUpStorageCharging \left(\vPowerIn - \vPowerIn[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateUp\right) \\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(\vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \cPowerInInitial - \cRampRateUp\right) \\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sStorage} \dRampRateUpStorageDischarging \left(\vPowerOut - \vPowerOut[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateUp\right) \\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(\vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \cPowerOutInitial - \cRampRateUp\right) \\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dRampRateDown \left(- \vPower + \vPower[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateDown\right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(- \vPower[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cPowerInitial - \cRampRateDown\right)\\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sStorage} \dRampRateDownStorageCharging \left(- \vPowerIn + \vPowerIn[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateDown\right) \\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(- \vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cPowerInInitial - \cRampRateDown\right) \\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sStorage} \dRampRateDownStorageDischarging \left(- \vPowerOut + \vPowerOut[\iGenerator,\iYear,\iScenario,\iInterval-1] - \cRampRateDown\right) \\
%		& +  \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(- \vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cPowerOutInitial - \cRampRateDown\right) \\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iZone \in \sZones} \dNonNegativeLostLoad \left(- \vLostLoadPower\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iLink \in \sLinks} \dMinPowerFlow \left(\cPowerFlowMin - \vPowerFlow\right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iLink \in \sLinks} \dMaxPowerFlow \left(\vPowerFlow - \cPowerFlowMax\right)\\\nonumber
\end{align}

\begin{align}
	\begin{split}
		\bm{\zeta}^{T} \bm{n}(\bm{u}, \bm{v}, \bm{\overline{x}}) = 	& \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iZone \in \sZones} \dPowerBalance \left(\cDemand - \sum\limits_{\iGenerator \in \sGenerators_{\iZone} \setminus \sStorage_{\iZone}} \vPower - \sum\limits_{\iGenerator \in \sStorage_{\iZone}} \left(\vPowerOut - \vPowerIn\right) + \sum\limits_{\iLink \in \sLinks} \cIncidenceMatrix \vPowerFlow - \vLostLoadPower \right)\\
		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sStorage} \dStorageEnergyTransition \left(-\vStorageUnitEnergy + \vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iInterval-1] + \cStorageUnitEfficiencyCharging \vPowerIn - \frac{1}{\cStorageUnitEfficiencyDischarging} \vPowerOut \right)\\
		& + \sum\limits_{\iYear \in \sYears} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(-\vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalStart] + \cStorageEnergyInitial + \cStorageUnitEfficiencyCharging \vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \frac{1}{\cStorageUnitEfficiencyDischarging} \vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalStart] \right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dGeneratorEnergyOutput \left(\vEnergy - \frac{\vPower[\iGenerator, \iYear,\iScenario,\iInterval-1] + \vPower}{2} \right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(\vEnergy[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \frac{\cPowerInitial + \vPower[\iGenerator,\iYear,\iScenario,\iIntervalStart]}{2} \right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iGenerator \in \sStorage} \dStorageEnergyOutput \left(\vEnergy - \frac{\vPowerOut[\iGenerator, \iYear,\iScenario,\iInterval-1] + \vPowerOut}{2} \right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalStart] \left(\vEnergy[\iGenerator,\iYear,\iScenario,\iIntervalStart] - \frac{\cPowerOutInitial + \vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalStart]}{2} \right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalStart\}} \sum\limits_{\iZone \in \sZones} \dLostLoadEnergy \left(\vLostLoadEnergy - \frac{\vLostLoadPower[\iZone, \iYear,\iScenario,\iInterval-1] + \vLostLoadPower}{2} \right)\\
%		& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iZone \in \sZones} \dLostLoadEnergy[\iZone,\iYear,\iScenario,\iIntervalStart] \left(\vLostLoadEnergy[\iZone,\iYear,\iScenario,\iIntervalStart] - \frac{\cLostLoadPowerInitial + \vLostLoadPower[\iZone,\iYear,\iScenario,\iIntervalStart]}{2} \right)\\
	\end{split}
\end{align}

\subsection{Dual problem}
Define the dual function as follows:

\begin{equation}
	\Lambda = \minimise\limits_{\bm{\mu}, \bm{\nu}, \bm{\sigma}, \bm{\zeta}} \quad \mathcal{L}(\cdot)
\end{equation}

The dual problem can be expressed as:

\begin{equation}
	\maximise\limits_{\bm{\mu}\geq \bm{0}, \bm{\sigma}\geq \bm{0}, \bm{\nu}, \bm{\zeta}} \quad \Lambda
\end{equation}

\subsubsection{Expressions}
Each primal variable within the Lagrangian is factored out to identify a set of constraints that prevent the dual problem from being unbounded.

\newcommand{\sumIntervals}{\sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals}}

%x_c
Investment decision - candidate thermal:
\begin{align}
	& \sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vInstalledCapacity \left(\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost + \sum\limits_{\iYearAlias \geq \iYear} \cDiscountRate[\iYearAlias] \cFixedOperationsMaintenanceCostGenerator - \dNonNegativeCandidateCapacity + \sum\limits_{\iYearAlias \geq \iYear} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} - \dMaxPowerOutputCandidateThermal[\iGenerator,\iYearAlias,\iScenario,\iInterval] + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate}\cFixedOperationsMaintenanceCostGenerator\right)\\
\end{align}

Investment decision - candidate wind:
\begin{align}
& \sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vInstalledCapacity \left(\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost + \sum\limits_{\iYearAlias \geq \iYear} \cDiscountRate[\iYearAlias] \cFixedOperationsMaintenanceCostGenerator - \dNonNegativeCandidateCapacity 
%+ \sum\limits_{\iYearAlias \geq \iYear} \dWindBuildLimit[k(\iGenerator),\iYearAlias] 
+ \sum\limits_{\iYearAlias \geq \iYear} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorWind[\iGenerator,\iYearAlias,\iScenario,\iInterval] \dMaxPowerOutputWindCandidate[\iGenerator,\iYearAlias,\iScenario,\iInterval] + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate}\cFixedOperationsMaintenanceCostGenerator \right)\\
\end{align}

Investment decision - candidate solar:
\begin{align}
& \sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vInstalledCapacity \left(\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost + \sum\limits_{\iYearAlias \geq \iYear} \cDiscountRate[\iYearAlias] \cFixedOperationsMaintenanceCostGenerator - \dNonNegativeCandidateCapacity 
%+ \sum\limits_{\iYearAlias \geq \iYear} \dSolarBuildLimit[k(\iGenerator),\iYearAlias] 
+ \sum\limits_{\iYearAlias \geq \iYear} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorSolar[\iGenerator,\iYearAlias,\iScenario,\iInterval] \dMaxPowerOutputSolarCandidate[\iGenerator,\iYearAlias,\iScenario,\iInterval] + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate}\cFixedOperationsMaintenanceCostGenerator\right)\\
\end{align}

%\begin{equation}
%\sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sGeneratorsCandidate} \vInstalledCapacity \left(\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost - \dNonNegativeCandidateCapacity + \sum\limits_{\iYearAlias \geq \iYear} -\dTotalInstallCapacity[\iGenerator,\iYearAlias] \right)
%\end{equation}

%%a
%Total installed capacity - candidate thermal generators:
%\begin{align}
%& \sum\limits_{\iYear \in \sYears \setminus \{\iYearTerminal\}} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vInstalledCapacityTotal \left(\dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \dMaxPowerOutputCandidateThermal \right) \nonumber\\
%& + \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vInstalledCapacityTotal[\iGenerator, \iYearTerminal] \left(\dTotalInstallCapacity[\iGenerator,\iYearTerminal] + \cDiscountRate[\iYearTerminal] \left[1 + \frac{1}{\cInterestRate}\right] \cFixedOperationsMaintenanceCostGenerator[\iGenerator,\iYearTerminal] + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \dMaxPowerOutputCandidateThermal[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \right)\\\nonumber
%%+ \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vInstalledCapacityTotal[\iGenerator,\iYearTerminal] \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} \cFixedOperationsMaintenanceCostGenerator
%\end{align}
%
%Total installed capacity - candidate solar generators:
%\begin{align}
%	& \sum\limits_{\iYear \in \sYears \setminus \{\iYearTerminal\}} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vInstalledCapacityTotal \left(\dSolarBuildLimit[k(\iGenerator),\iYear] + \dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorSolar \dMaxPowerOutputSolarCandidate \right) \nonumber\\
%	& + \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vInstalledCapacityTotal[\iGenerator,\iYearTerminal] \left(\dSolarBuildLimit[k(\iGenerator),\iYearTerminal] + \dTotalInstallCapacity[\iGenerator,\iYearTerminal] + \cDiscountRate[\iYearTerminal] \left[1 + \frac{1}{\cInterestRate}\right] \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorSolar[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \dMaxPowerOutputSolarCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \right)\\ \nonumber
%%	+ \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vInstalledCapacityTotal[\iGenerator,\iYearTerminal] \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} \cFixedOperationsMaintenanceCostGenerator
%\end{align}
%
%Total installed capacity - candidate wind generators:
%\begin{align}
%& \sum\limits_{\iYear \in \sYears \setminus \{\iYearTerminal\}} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vInstalledCapacityTotal \left(\dWindBuildLimit[k(\iGenerator),\iYear] + \dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorWind \dMaxPowerOutputWindCandidate \right) \nonumber\\
%& + \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vInstalledCapacityTotal[\iGenerator,\iYearTerminal] \left(\dWindBuildLimit[k(\iGenerator),\iYearTerminal] + \dTotalInstallCapacity[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \left[1 + \frac{1}{\cInterestRate}\right] \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorWind[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \dMaxPowerOutputWindCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \right)
%%+ \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vInstalledCapacityTotal[\iGenerator,\iYearTerminal] \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} \cFixedOperationsMaintenanceCostGenerator
%\end{align}

Total installed capacity - candidate storage generators:
\begin{align}
& \sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sStorageCandidate} \vInstalledCapacity \left(\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost + \sum\limits_{\iYearAlias \geq \iYear} \cDiscountRate[\iYearAlias] \cFixedOperationsMaintenanceCostGenerator - \dNonNegativeCandidateCapacity + \sum\limits_{\iYearAlias \geq \iYear} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \left[- \dMaxChargingRateCandidate[\iGenerator,\iYearAlias,\iScenario,\iInterval] - \dMaxDischargingRateCandidate[\iGenerator,\iYearAlias,\iScenario,\iInterval] - \dMaxStorageEnergyCandidate[\iGenerator,\iYearAlias,\iScenario,\iInterval] \right] + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate}\cFixedOperationsMaintenanceCostGenerator\right)\\
\end{align}


%\begin{equation}
%\sum\limits_{\iYear \in \sYears} \sum\limits_{\iGenerator \in \sStorageCandidate} \vInstalledCapacityTotal \left(\dStorageBuildLimit[k(\iGenerator),\iYear] + \dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \dMaxDischargingRateCandidate \right) + \sum\limits_{\iGenerator \in \sStorageCandidate} \vInstalledCapacityTotal[\iGenerator,\iYearTerminal] \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} \cFixedOperationsMaintenanceCostGenerator
%\end{equation}

%p
Existing thermal generator power output:
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingThermal} \vPower\left(-\dMinPowerOutput + \dMaxPowerOutputExistingThermal 
%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right]
%	- \frac{\dGeneratorEnergyOutput + \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2}
	 \right)\nonumber\\
	 & + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingThermal} \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left(-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputExistingThermal[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right] \right)\nonumber\\
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGeneratorsExistingThermal} \vPower[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]\left(-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputExistingThermal[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] 
%	- \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} 
%	\right)\\\nonumber
\end{align}

Candidate thermal generator power output:
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vPower\left(-\dMinPowerOutput + \dMaxPowerOutputCandidateThermal 
%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right]
%	 - \frac{\dGeneratorEnergyOutput + \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} 
	 \right)\nonumber\\
	& + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left(-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputCandidateThermal[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right] \right)\\\nonumber
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vPower[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputCandidateThermal[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} \right)\\\nonumber
\end{align}

Existing wind generator power output:
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \vPower\left(-\dMinPowerOutput + \dMaxPowerOutputWindExisting
%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration\cMarginalCost
%	- \frac{\dGeneratorEnergyOutput + \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} 
	\right)\nonumber\\
	& + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left(-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputWindExisting[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost \right)\\\nonumber
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \vPower[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputWindExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} \right)\\\nonumber
\end{align}

Candidate wind generator power output:
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vPower\left(-\dMinPowerOutput + \dMaxPowerOutputWindCandidate 
%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right]
%	- \frac{\dGeneratorEnergyOutput + \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} 
	\right) \nonumber\\
	& + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left(-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputWindCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] - \vBaseline[\iYearTerminal]\vPermitPrice[\iYearTerminal] \right] \right)\nonumber\\
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vPower[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputWindCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} \right)\\\nonumber
\end{align}

Existing solar generator power output:
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \vPower\left(-\dMinPowerOutput + \dMaxPowerOutputSolarExisting 
%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration\cMarginalCost
%	- \frac{\dGeneratorEnergyOutput + \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} 
	\right) \nonumber\\
	& + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left(-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputSolarExisting[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost \right)\\
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \vPower[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputSolarExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} \right)\\\nonumber
\end{align}

Candidate solar generator power output:
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vPower \left(-\dMinPowerOutput + \dMaxPowerOutputSolarCandidate 
%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right]
%	- \frac{\dGeneratorEnergyOutput + \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} 
	\right) \nonumber\\
	& + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left(-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputSolarCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] - \vBaseline[\iYearTerminal]\vPermitPrice[\iYearTerminal] \right] \right)\nonumber\\
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vPower[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputSolarCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} \right)\\\nonumber
\end{align}

Existing hydro generator power output:
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsHydro} \vPower\left(-\dMinPowerOutput + \dMaxPowerOutputHydro 
%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration\cMarginalCost
%	- \frac{\dGeneratorEnergyOutput + \dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} 
	\right) \nonumber\\
	& + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsHydro} \vPower[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left(-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputHydro[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost \right)\\
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGeneratorsHydro} \vPower[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputHydro[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} \right)\\\nonumber
\end{align}

%p_in
Existing storage unit charging power:
\begin{align}
	& \sum\limits_{\iYear \in \sYears} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals 
%		\setminus \{\iIntervalTerminal\}
	} \sum\limits_{\iGenerator \in \sStorageExisting} \vPowerIn \left( - \dNonNegativeCharging + \dMaxChargingRateExisting + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cStorageUnitEfficiencyCharging\dStorageEnergyTransition 
%	+ \dRampRateUpStorageCharging - \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDownStorageCharging + \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1]
	 \right) \nonumber\\
%	& + \sum\limits_{\iYear \in \sYears} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorageExisting} \vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left( - \dNonNegativeCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxChargingRateExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] + \cStorageUnitEfficiencyCharging\dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	+ \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	\right)\\\nonumber
\end{align}

Candidate storage unit charging power:
\begin{align}
	& \sum\limits_{\iYear \in \sYears} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals 
%		\setminus \{\iIntervalTerminal\}
	} \sum\limits_{\iGenerator \in \sStorageCandidate} \vPowerIn \left( - \dNonNegativeCharging + \dMaxChargingRateCandidate + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cStorageUnitEfficiencyCharging\dStorageEnergyTransition
%	 + \dRampRateUpStorageCharging - \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDownStorageCharging + \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1]
	\right)\nonumber\\
%	& + \sum\limits_{\iYear \in \sYears} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorageExisting} \vPowerIn[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left( - \dNonNegativeCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxChargingRateCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] + \cStorageUnitEfficiencyCharging\dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]
%	 + \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	 \right)\\\nonumber
\end{align}

%p_out
Existing storage unit discharging power:
\begin{align}
	& \sum\limits_{\iYear \in \sYears \setminus \{\iYearTerminal\}}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals 
%		\setminus \{\iIntervalTerminal\}
	} \sum\limits_{\iGenerator \in \sStorageExisting} \vPowerOut \left( - \dNonNegativeDischarging + \dMaxDischargingRateExisting - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition + \cDiscountRate \cScenarioDuration \cMarginalCost \right) \nonumber\\
	& + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals 
	%		\setminus \{\iIntervalTerminal\}
} \sum\limits_{\iGenerator \in \sStorageExisting} \vPowerOut[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left( - \dNonNegativeDischarging[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxDischargingRateExisting[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost[\iGenerator,\iYearTerminal] \right) \nonumber\\
%	- \frac{\dStorageEnergyOutput + \dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} 
%	\right.\nonumber\\
%	& \left. \vphantom{\sum\limits_{}} + \dRampRateUpStorageDischarging - \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDownStorageDischarging + \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval+1] \right)\\
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorageExisting} \vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left( - \dNonNegativeDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxDischargingRateExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	- \frac{\dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} + \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%	\right)\\\nonumber
\end{align}

Candidate storage unit discharging power:
\begin{align}
	& \sum\limits_{\iYear \in \sYears \setminus \{\iYearTerminal\}}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals 
%		\setminus \{\iIntervalTerminal\}
	} \sum\limits_{\iGenerator \in \sStorageCandidate} \vPowerOut \left( - \dNonNegativeDischarging + \dMaxDischargingRateCandidate - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition + \cDiscountRate \cScenarioDuration \cMarginalCost \right) \nonumber \\ 
	& + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals 
	%		\setminus \{\iIntervalTerminal\}
} \sum\limits_{\iGenerator \in \sStorageCandidate} \vPowerOut[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left( - \dNonNegativeDischarging[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxDischargingRateCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost[\iGenerator,\iYearTerminal] \right) \nonumber\\
%	- \frac{\dStorageEnergyOutput + \dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2}\right. \nonumber\\
%	& + \left. \vphantom{\sum\limits_{}} \dRampRateUpStorageDischarging - \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDownStorageDischarging + \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval+1] \right) \\
%	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorageCandidate} \vPowerOut[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left( - \dNonNegativeDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxDischargingRateCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \frac{\dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} + \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \right)\\\nonumber
\end{align}

%q
Existing storage unit energy:
\begin{align}
	& \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalTerminal\}} \sum\limits_{\iGenerator \in \sStorageExisting} \vStorageUnitEnergy \left(- \dNonNegativeStorageEnergy + \dMaxStorageEnergyExisting - \dStorageEnergyTransition + \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iInterval+1] \right)\\
	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iGenerator \in \sStorageExisting} \vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(- \dNonNegativeStorageEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxStorageEnergyExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dMinStorageEnergyIntervalEnd + \dMaxStorageEnergyIntervalEnd \right)\\
\end{align}

Candidate storage unit energy:
\begin{align}
	& \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals \setminus \{\iIntervalTerminal\}} \sum\limits_{\iGenerator \in \sStorageCandidate} \vStorageUnitEnergy \left(- \dNonNegativeStorageEnergy + \dMaxStorageEnergyCandidate - \dStorageEnergyTransition + \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iInterval+1] \right)\\
	& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iGenerator \in \sStorageCandidate} \vStorageUnitEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] \left(- \dNonNegativeStorageEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxStorageEnergyCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dMinStorageEnergyIntervalEnd + \dMaxStorageEnergyIntervalEnd \right)\\
\end{align}

%e
%Existing thermal generator energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sGeneratorsExistingThermal} \vEnergy \left[\cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right]  + \dGeneratorEnergyOutput\right] 
%%	+ \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingThermal} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right]\right]
%\end{equation}

%Candidate thermal generator energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vEnergy \left[\cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right]  + \dGeneratorEnergyOutput\right] 
%%	+ \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right]\right]
%\end{equation}

%Existing wind generator energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \vEnergy \left(\cDiscountRate\cScenarioDuration \cMarginalCost + \dGeneratorEnergyOutput \right) 
%%	+ \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \cMarginalCost \right]
%\end{equation}

%Candidate wind generator energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vEnergy \left(\cDiscountRate\cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right] + \dGeneratorEnergyOutput \right) 
%%	+ \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \left[\cMarginalCost - \vBaseline[\iYearTerminal] \vPermitPrice[\iYearTerminal] \right] \right]
%\end{equation}

%Existing solar generator energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \vEnergy \left(\cDiscountRate\cScenarioDuration \cMarginalCost + \dGeneratorEnergyOutput \right) 
%%	+ \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \cMarginalCost \right]
%\end{equation}

%Candidate solar generator energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vEnergy \left(\cDiscountRate\cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right] + \dGeneratorEnergyOutput \right) 
%%	+ \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \left[\cMarginalCost - \vBaseline[\iYearTerminal] \vPermitPrice[\iYearTerminal] \right] \right]
%\end{equation}

%Existing storage unit energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sStorageExisting} \vEnergy \left(\cDiscountRate\cScenarioDuration \cMarginalCost + \dStorageEnergyOutput \right) + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageExisting} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \cMarginalCost \right]
%\end{equation}

%Candidate storage unit energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sStorageCandidate} \vEnergy \left(\cDiscountRate\cScenarioDuration \cMarginalCost + \dStorageEnergyOutput \right) + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageCandidate} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \cMarginalCost \right]
%\end{equation}

%Existing hydro generator energy output:
%\begin{equation}
%	\sumIntervals \sum\limits_{\iGenerator \in \sGeneratorsHydro} \vEnergy \left(\cDiscountRate\cScenarioDuration \cMarginalCost + \dGeneratorEnergyOutput \right) 
%%	+ \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsHydro} \vEnergy[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \left[ \frac{\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario]}{\cInterestRate} \cMarginalCost \right]
%\end{equation}

%p_V
Load shedding (power):
\begin{align}
	& \sum\limits_{\iYear \in \sYears 
		\setminus \{\iYearTerminal\}
	} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iZone \in \sZones} \vLostLoadPower \left(- \dNonNegativeLostLoad - \dPowerBalance + \cDiscountRate \cScenarioDuration \cLostLoadCost\right)\\
	& + \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iZone \in \sZones} \vLostLoadPower[\iZone,\iYearTerminal,\iScenario,\iInterval] \left(- \dNonNegativeLostLoad[\iZone,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[\iZone,\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cLostLoadCost\right)\\
\end{align}

%%e_V
%Load shedding (energy):
%\begin{equation}
%	\sumIntervals \sum\limits_{\iZone \in \sZones} \vLostLoadEnergy \left(\cDiscountRate \cScenarioDuration \cLostLoadCost + \dLostLoadEnergy \right) 
%%	+ \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \vLostLoadEnergy[\iZone,\iYearTerminal,\iScenario,\iInterval] \left( \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} \cScenarioDuration[\iYearTerminal,\iScenario] \cLostLoadCost + \dLostLoadEnergy[\iZone,\iYearTerminal,\iScenario,\iInterval] \right)
%\end{equation}

%p_L
Powerflow:
\begin{equation}
	\sumIntervals \sum\limits_{\iLink \in \sLinks} \vPowerFlow \left(-\dMinPowerFlow + \dMaxPowerFlow + \cIncidenceMatrix[g(\iLink), \iLink] \dPowerBalance[g(\iLink),\iYear,\iScenario,\iInterval] + \cIncidenceMatrix[h(\iLink), \iLink] \dPowerBalance[h(\iLink),\iYear,\iScenario,\iInterval]\right)
\end{equation}

%Dual objective
Dual objective:

\begin{align}
%\textrm{OBJ}_{d} =  & \sum\limits_{\iYear \in \sYears} \sum\limits_{\iZone \in \sZones} \left[- \dSolarBuildLimit \cBuildLimitSolar - \dWindBuildLimit \cBuildLimitWind 
%- \dStorageBuildLimit \cBuildLimitStorage
%\right]\\
& \textrm{OBJ}_{d} = \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dMinPowerOutput \cPowerOutputMin\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingThermal} - \dMaxPowerOutputExistingThermal \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateThermal} \dMaxPowerOutputCandidateThermal \left(\vPower - \vInstalledCapacityTotal\right)\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingWind} - \dMaxPowerOutputWindExisting \cCapacityFactorWind \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateWind} - \dMaxPowerOutputWindCandidate \cCapacityFactorWind \vInstalledCapacityTotal\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsExistingSolar} - \dMaxPowerOutputSolarExisting \cCapacityFactorSolar \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsCandidateSolar} - \dMaxPowerOutputSolarCandidate \left(\vPower - \cCapacityFactorSolar \vInstalledCapacityTotal\right)\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGeneratorsHydro} - \dMaxPowerOutputHydro \cPowerOutputHydro \left(1 - \cRetirementIndicator\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} \dNonNegativeCharging \left(-\vPowerIn\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} \dNonNegativeDischarging \left(-\vPowerOut\right)\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageExisting} - \dMaxChargingRateExisting \cPowerChargingMax \left(1 - \cRetirementIndicator\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageCandidate} \dMaxChargingRateCandidate \left(\vPowerIn - \vInstalledCapacityTotal\right)\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageExisting} - \dMaxDischargingRateExisting \cPowerDischargingMax \left(1 - \cRetirementIndicator\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageCandidate} \dMaxDischargingRateCandidate \left(\vPowerOut - \vInstalledCapacityTotal\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} \dNonNegativeStorageEnergy \left(- \vStorageUnitEnergy\right)\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageExisting} - \dMaxStorageEnergyExisting \cStorageUnitEnergyMax\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorageCandidate} \dMaxStorageEnergyCandidate \left(\vStorageUnitEnergy - \vInstalledCapacityTotal\right)\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dMinStorageEnergyIntervalEnd \cStorageUnitEnergyIntervalEndMin\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} - \dMaxStorageEnergyIntervalEnd \cStorageUnitEnergyIntervalEndMax\\
%
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} - \dRampRateUp \cRampRateUp\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalStart] \cPowerInitial\\
%
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} - \dRampRateUpStorageCharging \cRampRateUp\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} - \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \cPowerInInitial\\
%
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} - \dRampRateUpStorageDischarging \cRampRateUp\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} - \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \cPowerOutInitial\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} - \dRampRateDown \cRampRateDown\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iZone \in \sZones} \dNonNegativeLostLoad \left(- \vLostLoadPower\right)\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalStart] \cPowerInitial\\
%
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} - \dRampRateDownStorageCharging \cRampRateDown\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \cPowerInInitial\\
%
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iGenerator \in \sStorage} - \dRampRateDownStorageDischarging \cRampRateDown\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iGenerator \in \sStorage} \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalStart] \cPowerOutInitial \\
%
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iLink \in \sLinks} \dMinPowerFlow \cPowerFlowMin\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iLink \in \sLinks} - \dMaxPowerFlow \cPowerFlowMax\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} \sum\limits_{\iZone \in \sZones} \dPowerBalance \cDemand\\
& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iGenerator \in \sStorage} \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalStart] \cStorageEnergyInitial\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iGenerator \in \sGenerators \setminus \sStorage} - \dGeneratorEnergyOutput[\iGenerator, \iYear,\iScenario,\iIntervalStart] \frac{\cPowerInitial}{2}\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iGenerator \in \sStorage} - \dStorageEnergyOutput[\iGenerator, \iYear,\iScenario,\iIntervalStart] \frac{\cPowerOutInitial}{2}\\
%& + \sum\limits_{\iYear \in \sYears}\sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iZone \in \sZones} - \dLostLoadEnergy[\iZone, \iYear,\iScenario,\iIntervalStart] \frac{\cLostLoadPowerInitial}{2}\\
%& + \sum\limits_{\iYear \in \sYears} \cDiscountRate \sum\limits_{\iGenerator \in \sGeneratorsExisting} \cFixedOperationsMaintenanceCostGenerator \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator\right)\\
%& + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate} \sum\limits_{\iGenerator \in \sGeneratorsExisting} \cFixedOperationsMaintenanceCostGenerator \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator[\iGenerator,\iYearTerminal]\right)\\
%& + \frac{\cDiscountRate[\iYearTerminal]}{\cInterestRate}  \sum\limits_{\iGenerator \in \sGeneratorsExisting} \cFixedOperationsMaintenanceCostGenerator \cPowerOutputMax[\iGenerator] \left(1 - \cRetirementIndicator[\iGenerator,\iYearTerminal]\right)\\
\end{align}

%\subsection{Constraints}
%The expressions presented in the preceding section can be used to formulate a set of dual constraints:
%
%%x_c
%%Investment decision:
%%\begin{equation}
%%\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost - \dNonNegativeCandidateCapacity + \sum\limits_{\iYearAlias \geq \iYear} -\dTotalInstallCapacity[\iGenerator,\iYearAlias] = 0 \quad \forall \iYear \in \sYears \quad \forall \iGenerator \in \sGeneratorsCandidate
%%\end{equation}
%
%Investment decision - candidate thermal:
%\begin{equation}
%\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost + \sum\limits_{\iYearAlias \geq \iYear} \cDiscountRate[\iYearAlias] \cFixedOperationsMaintenanceCostGenerator - \dNonNegativeCandidateCapacity + \sum\limits_{\iYearAlias \geq \iYear} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} - \dMaxPowerOutputCandidateThermal[\iGenerator,\iYearAlias,\iScenario,\iInterval] = 0 \quad \iYear \in \sYears \quad \iGenerator \in \sGeneratorsCandidateThermal
%\end{equation}
%
%Investment decision - candidate wind:
%\begin{equation}
%\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost + \sum\limits_{\iYearAlias \geq \iYear} \cDiscountRate[\iYearAlias] \cFixedOperationsMaintenanceCostGenerator - \dNonNegativeCandidateCapacity + \sum\limits_{\iYearAlias \geq \iYear} \dWindBuildLimit[k(\iGenerator),\iYearAlias] + \sum\limits_{\iYearAlias \geq \iYear} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorWind[\iGenerator,\iYearAlias,\iScenario,\iInterval] \dMaxPowerOutputWindCandidate[\iGenerator,\iYearAlias,\iScenario,\iInterval] = 0 \quad \iYear \in \sYears \quad \iGenerator \in \sGeneratorsCandidateWind
%\end{equation}
%
%Investment decision - candidate solar:
%\begin{equation}
%\frac{\cDiscountRate}{\cInterestRate} \cAmortisationRate \cCandidateInvestmentCost + \sum\limits_{\iYearAlias \geq \iYear} \cDiscountRate[\iYearAlias] \cFixedOperationsMaintenanceCostGenerator - \dNonNegativeCandidateCapacity + \sum\limits_{\iYearAlias \geq \iYear} \dSolarBuildLimit[k(\iGenerator),\iYearAlias] + \sum\limits_{\iYearAlias \geq \iYear} \sum\limits_{\iScenario \in \sScenarios} \sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorSolar[\iGenerator,\iYearAlias,\iScenario,\iInterval] \dMaxPowerOutputSolarCandidate[\iGenerator,\iYearAlias,\iScenario,\iInterval] = 0 \quad \iYear \in \sYears \quad \iGenerator \in \sGeneratorsCandidateSolar
%\end{equation}
%
%%%a
%%Total installed capacity - candidate thermal generators:
%%\begin{equation}
%% \dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \dMaxPowerOutputCandidateThermal = 0 \quad \forall \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \forall \iGenerator \in \sGeneratorsCandidateThermal
%%\end{equation}
%%
%%\begin{equation}
%%\dTotalInstallCapacity[\iGenerator,\iYearTerminal] + \cDiscountRate[\iYearTerminal] \left[1 + \frac{1}{\cInterestRate}\right] \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \dMaxPowerOutputCandidateThermal[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \forall \iGenerator \in \sGeneratorsCandidateThermal
%%\end{equation}
%%
%%Total installed capacity - candidate solar generators:
%%\begin{equation}
%%\dSolarBuildLimit[k(\iGenerator), \iYear] + \dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorSolar \dMaxPowerOutputSolarCandidate = 0 \quad \forall \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iGenerator \in \sGeneratorsCandidateSolar
%%\end{equation}
%%
%%\begin{equation}
%%\dSolarBuildLimit[k(\iGenerator),\iYearTerminal] + \dTotalInstallCapacity[\iGenerator,\iYearTerminal] + \cDiscountRate[\iYearTerminal] \left[1 + \frac{1}{\cInterestRate}\right] \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorSolar[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \dMaxPowerOutputSolarCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \forall \iGenerator \in \sGeneratorsCandidateSolar
%%\end{equation}
%%
%%Total installed capacity - candidate wind generators:
%%\begin{equation}
%%\dWindBuildLimit[k(\iGenerator), \iYear] + \dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorWind \dMaxPowerOutputWindCandidate = 0 \quad \forall \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \forall \iGenerator \in \sGeneratorsCandidateWind
%%\end{equation}
%%
%%\begin{equation}
%%\dWindBuildLimit[k(\iGenerator),\iYearTerminal] + \dTotalInstallCapacity[\iGenerator,\iYearTerminal] + \cDiscountRate[\iYearTerminal] \left[1 + \frac{1}{\cInterestRate}\right] \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \cCapacityFactorWind[\iGenerator,\iYearTerminal,\iScenario,\iInterval] \dMaxPowerOutputWindCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \forall \iGenerator \in \sGeneratorsCandidateWind
%%\end{equation}
%
%%Total installed capacity - candidate storage generators:
%%\begin{equation}
%%\dStorageBuildLimit[k(\iGenerator), \iYear] + \dTotalInstallCapacity + \cDiscountRate \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \dMaxDischargingRateCandidate = 0 \quad \forall \iYear \in \sYears  \quad \forall \iGenerator \in \sStorageCandidate
%%\end{equation}
%
%
%%\begin{equation}
%%\dStorageBuildLimit[k(\iGenerator),\iYearTerminal] + \dTotalInstallCapacity[\iGenerator,\iYearTerminal] + \cDiscountRate[\iYearTerminal] \left[1 + \frac{1}{\cInterestRate}\right] \cFixedOperationsMaintenanceCostGenerator + \sum\limits_{\iScenario \in \sScenarios}\sum\limits_{\iInterval \in \sIntervals} - \dMaxDischargingRateCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \forall \iGenerator \in \sStorageCandidate
%%\end{equation}
%
%%p
%Existing thermal generator power output:
%\begin{align}
%-\dMinPowerOutput + \dMaxPowerOutputExistingThermal 
%%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right] = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingThermal
%\end{align}
%
%\begin{align}
%-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputExistingThermal[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingThermal
%\end{align}
%
%%\begin{equation}
%%-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputExistingThermal[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%%+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sGeneratorsExistingThermal\\
%%\end{equation}
%
%Candidate thermal generator power output:
%\begin{equation}
%-\dMinPowerOutput + \dMaxPowerOutputCandidateThermal 
%%	+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right] = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateThermal
%\end{equation}
%
%\begin{align}
%-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputCandidateThermal[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateThermal
%\end{align}
%
%%\begin{equation}
%%-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputCandidateThermal[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%%+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sGeneratorsCandidateThermal
%%\end{equation}
%
%Existing wind generator power output:
%\begin{equation}
%-\dMinPowerOutput + \dMaxPowerOutputWindExisting 
%%+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \cMarginalCost = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals\quad \iGenerator \in \sGeneratorsExistingWind
%\end{equation}
%
%\begin{equation}
%-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputWindExisting[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost[\iGenerator,\iYearTerminal] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals\quad \iGenerator \in \sGeneratorsExistingWind
%\end{equation}
%
%%\begin{equation}
%% -\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputWindExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%% + \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%% - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sGeneratorsExistingWind
%%\end{equation}
%
%Candidate wind generator power output:
%\begin{equation}
%-\dMinPowerOutput + \dMaxPowerOutputWindCandidate 
%%+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right] = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateWind
%\end{equation}
%
%\begin{equation}
%-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputWindCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] - \vBaseline[\iYearTerminal] \vPermitPrice[\iYearTerminal] \right] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateWind
%\end{equation}
%
%
%%\begin{equation}
%%-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputWindCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%%+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sGeneratorsCandidateWind
%%\end{equation}
%
%Existing solar generator power output:
%\begin{equation}
%-\dMinPowerOutput + \dMaxPowerOutputSolarExisting 
%%+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \cMarginalCost = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingSolar
%\end{equation}
%
%\begin{equation}
%-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputSolarExisting[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost[\iGenerator,\iYearTerminal] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals\quad \iGenerator \in \sGeneratorsExistingSolar
%\end{equation}
%
%%\begin{equation}
%%-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputSolarExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%%+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sGeneratorsExistingSolar
%%\end{equation}
%
%Candidate solar generator power output:
%\begin{equation}
%-\dMinPowerOutput + \dMaxPowerOutputSolarCandidate 
%%+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right] = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateSolar
%\end{equation}
%
%\begin{equation}
%-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputSolarCandidate[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] - \vBaseline[\iYearTerminal] \vPermitPrice[\iYearTerminal] \right] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateSolar
%\end{equation}
%
%
%%\begin{equation}
%%-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputSolarCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%%+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sGeneratorsCandidateSolar
%%\end{equation}
%
%Existing hydro generator power output:
%\begin{equation}
%-\dMinPowerOutput + \dMaxPowerOutputHydro 
%%+ \dRampRateUp - \dRampRateUp[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDown + \dRampRateDown[\iGenerator,\iYear,\iScenario,\iInterval+1] 
%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cDiscountRate \cScenarioDuration \cMarginalCost = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsHydro
%\end{equation}
%
%\begin{equation}
%-\dMinPowerOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] + \dMaxPowerOutputHydro[\iGenerator,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[k(\iGenerator),\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost[\iGenerator,\iYearTerminal] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals\quad \iGenerator \in \sGeneratorsHydro
%\end{equation}
%
%%\begin{equation}
%%-\dMinPowerOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxPowerOutputHydro[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%%+ \dRampRateUp[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDown[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] 
%%- \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{\dGeneratorEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sGeneratorsHydro
%%\end{equation}
%
%%%p_in
%%Existing storage unit charging power:
%%\begin{equation}
%%- \dNonNegativeCharging + \dMaxChargingRateExisting + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cStorageUnitEfficiencyCharging\dStorageEnergyTransition + \dRampRateUpStorageCharging - \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDownStorageCharging + \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \setminus \{\iIntervalTerminal\} \quad \iGenerator \in \sStorageExisting
%%\end{equation}
%%
%%\begin{equation}
%%- \dNonNegativeCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxChargingRateExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] + \cStorageUnitEfficiencyCharging \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sStorageExisting
%%\end{equation}
%%
%%Candidate storage unit charging power:
%%\begin{equation}
%%- \dNonNegativeCharging + \dMaxChargingRateCandidate + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] + \cStorageUnitEfficiencyCharging\dStorageEnergyTransition + \dRampRateUpStorageCharging - \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1] - \dRampRateDownStorageCharging + \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iInterval+1] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \setminus \{\iIntervalTerminal\} \quad \iGenerator \in \sStorageCandidate
%%\end{equation}
%%
%%\begin{equation}
%%- \dNonNegativeCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxChargingRateCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] + \cStorageUnitEfficiencyCharging \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dRampRateUpStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageCharging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sStorageCandidate
%%\end{equation}
%%
%%%p_out
%%Existing storage unit discharging power:
%%\begin{align}
%%- \dNonNegativeDischarging + \dMaxDischargingRateExisting - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition  -  \frac{\dStorageEnergyOutput + \dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} + & \dRampRateUpStorageDischarging - \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval+1]
%%- \dRampRateDownStorageDischarging + \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval + 1] = 0 \nonumber\\ 
%%&\quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \setminus \{\iIntervalTerminal\} \quad \iGenerator \in \sStorageExisting
%%\end{align}
%%
%%\begin{equation}
%%- \dNonNegativeDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxDischargingRateExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \frac{\dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} + \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sStorageExisting
%%\end{equation}
%%
%%Candidate storage unit discharging power:
%%\begin{align}
%%- \dNonNegativeDischarging + \dMaxDischargingRateCandidate - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iInterval] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition - \frac{\dStorageEnergyOutput + \dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iInterval+1]}{2} + & \dRampRateUpStorageDischarging - \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval+1]
%%- \dRampRateDownStorageDischarging + \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iInterval + 1] = 0 \nonumber\\
%%& \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \setminus \{\iIntervalTerminal\} \quad \iGenerator \in \sStorageCandidate
%%\end{align}
%%
%%\begin{equation}
%%- \dNonNegativeDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxDischargingRateCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dPowerBalance[k(\iGenerator),\iYear,\iScenario,\iIntervalTerminal] - \frac{1}{\cStorageUnitEfficiencyDischarging} \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \frac{\dStorageEnergyOutput[\iGenerator,\iYear,\iScenario,\iIntervalTerminal]}{2} + \dRampRateUpStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dRampRateDownStorageDischarging[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sStorageCandidate
%%\end{equation}
%%
%%%q
%%Existing storage unit energy:
%%\begin{equation}
%%- \dNonNegativeStorageEnergy + \dMaxStorageEnergyExisting - \dStorageEnergyTransition + \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iInterval+1] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \setminus \{\iIntervalTerminal\} \quad \iGenerator \in \sStorageExisting
%%\end{equation}
%%
%%\begin{equation}
%%- \dNonNegativeStorageEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxStorageEnergyExisting[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dMinStorageEnergyIntervalEnd + \dMaxStorageEnergyIntervalEnd = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sStorageExisting
%%\end{equation}
%%
%%Candidate storage unit energy:
%%\begin{equation}
%%- \dNonNegativeStorageEnergy + \dMaxStorageEnergyCandidate - \dStorageEnergyTransition + \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iInterval+1] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \setminus \{\iIntervalTerminal\} \quad \iGenerator \in \sStorageCandidate
%%\end{equation}
%%
%%\begin{equation}
%%- \dNonNegativeStorageEnergy[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] + \dMaxStorageEnergyCandidate[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dStorageEnergyTransition[\iGenerator,\iYear,\iScenario,\iIntervalTerminal] - \dMinStorageEnergyIntervalEnd + \dMaxStorageEnergyIntervalEnd = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iGenerator \in \sStorageCandidate\\
%%\end{equation}
%
%%e
%%Existing thermal generator energy output:
%%\begin{equation}
%%\cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right]  + \dGeneratorEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingThermal
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right]  + \dGeneratorEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingThermal
%%\end{equation}
%
%%Candidate thermal generator energy output:
%%\begin{equation}
%%\cDiscountRate \cScenarioDuration \left[\cMarginalCost + \left(\cEmissionsIntensity - \vBaseline\right)\vPermitPrice \right]  + \dGeneratorEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateThermal
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal] + \left(\cEmissionsIntensity - \vBaseline[\iYearTerminal]\right)\vPermitPrice[\iYearTerminal] \right]  + \dGeneratorEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateThermal
%%\end{equation}
%
%%Existing wind generator energy output:
%%\begin{equation}
%%\cDiscountRate\cScenarioDuration \cMarginalCost + \dGeneratorEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingWind
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost + \dGeneratorEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingWind
%%\end{equation}
%
%%Candidate wind generator energy output:
%%\begin{equation}
%%\cDiscountRate\cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right] + \dGeneratorEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateWind
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost - \vBaseline[\iYearTerminal]\vPermitPrice[\iYearTerminal] \right] + \dGeneratorEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals  \quad \iGenerator \in \sGeneratorsCandidateWind
%%\end{equation}
%
%%Existing solar generator energy output:
%%\begin{equation}
%%\cDiscountRate\cScenarioDuration \cMarginalCost + \dGeneratorEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingSolar
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost + \dGeneratorEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsExistingSolar
%%\end{equation}
%
%%Candidate solar generator energy output:
%%\begin{equation}
%%\cDiscountRate\cScenarioDuration \left[\cMarginalCost - \vBaseline\vPermitPrice \right] + \dGeneratorEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsCandidateSolar
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \left[\cMarginalCost[\iGenerator,\iYearTerminal]  - \vBaseline[\iYearTerminal]\vPermitPrice[\iYearTerminal] \right] + \dGeneratorEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals  \quad \iGenerator \in \sGeneratorsCandidateSolar
%%\end{equation}
%
%%Existing storage unit energy output:
%%\begin{equation}
%%\cDiscountRate\cScenarioDuration \cMarginalCost + \dStorageEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad  \iGenerator \in \sStorageExisting
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost + \dStorageEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad  \iGenerator \in \sStorageExisting
%%\end{equation}
%
%%Candidate storage unit energy output:
%%\begin{equation}
%%\cDiscountRate\cScenarioDuration \cMarginalCost + \dStorageEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad  \iGenerator \in \sStorageCandidate
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost + \dStorageEnergyOutput[\iGenerator, \iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad  \iGenerator \in \sStorageCandidate
%%\end{equation}
%
%%Existing hydro generator energy output:
%%\begin{equation}
%%\cDiscountRate\cScenarioDuration \cMarginalCost + \dGeneratorEnergyOutput = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsHydro
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cMarginalCost + \dGeneratorEnergyOutput[\iGenerator,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iGenerator \in \sGeneratorsHydro
%%\end{equation}
%
%%p_V
%Load shedding (power):
%\begin{equation}
%- \dNonNegativeLostLoad - \dPowerBalance + \cDiscountRate \cScenarioDuration \cLostLoadCost = 0 \quad \iYear \in \sYears \setminus \{\iYearTerminal\} \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iZone \in \sZones
%\end{equation}
%
%\begin{equation}
%- \dNonNegativeLostLoad[\iZone,\iYearTerminal,\iScenario,\iInterval] - \dPowerBalance[\iZone,\iYearTerminal,\iScenario,\iInterval] + \cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cLostLoadCost = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iZone \in \sZones
%\end{equation}
%
%%%e_V
%%Load shedding (energy):
%%\begin{equation}
%%\cDiscountRate \cScenarioDuration \cLostLoadCost + \dLostLoadEnergy = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iZone \in \sZones
%%\end{equation}
%
%%\begin{equation}
%%\cDiscountRate[\iYearTerminal] \cScenarioDuration[\iYearTerminal,\iScenario] \left[1 + \frac{1}{\cInterestRate}\right] \cLostLoadCost + \dLostLoadEnergy[\iZone,\iYearTerminal,\iScenario,\iInterval] = 0 \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iZone \in \sZones
%%\end{equation}
%
%%p_L
%Powerflow:
%\begin{equation}
%-\dMinPowerFlow + \dMaxPowerFlow + \cIncidenceMatrix[g(\iLink), \iLink] \dPowerBalance[g(\iLink),\iYear,\iScenario,\iInterval] + \cIncidenceMatrix[h(\iLink), \iLink] \dPowerBalance[h(\iLink),\iYear,\iScenario,\iInterval] = 0 \quad \iYear \in \sYears \quad \iScenario \in \sScenarios \quad \iInterval \in \sIntervals \quad \iLink \in \sLinks
%\end{equation}
%
%%\sumIntervals \sum\limits_{\iLink \in \sLinks} 

\end{document}